<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>C·ª≠a h√†ng ƒëi·ªán tho·∫°i HT Mobile </title>
  <meta name="description" content="C·ª≠a h√†ng ƒëi·ªán tho·∫°i Ho√†ng Tu·∫•n. Danh s√°ch s·∫£n ph·∫©m, gi·ªè h√†ng, t√¨m ki·∫øm, l·ªçc v√† thanh to√°n." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
  
  :root{
    --primary:#0f172a;
    --accent:#0ea5a4;
    --muted:#64748b;
    --bg:#f8fafc;
    --card:#ffffff;
    --glass: rgba(255,255,255,0.6);
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2f7);color:var(--primary);font-size:16px;line-height:1.5}
  img{max-width:100%;height:auto;display:block}

  header{background:linear-gradient(90deg,#e6f6f5, #f1fbff);border-bottom:1px solid rgba(15,23,42,0.05);}
  .container{max-width:1200px;margin:0 auto;padding:20px;}
  .nav{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#34d399);display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
  .site-title{font-size:1.25rem;font-weight:700}
  nav ul{display:flex;gap:14px;list-style:none;padding:0;margin:0;flex-wrap:wrap}
  nav a{color:var(--primary);text-decoration:none;padding:8px 10px;border-radius:8px}
  nav a:hover{background:rgba(14,165,164,0.08)}

  /* hero */
  .hero{display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center;padding:28px 0}
  .hero-card{background:var(--card);border-radius:14px;padding:24px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
  .hero h1{margin:0;font-size:1.75rem}
  .hero p{color:var(--muted);margin-top:8px}
  .searchbar{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}
  .searchbar input{flex:1;min-width:160px;padding:12px 14px;border-radius:10px;border:1px solid #e6eef2;font-size:0.95rem}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer;white-space:nowrap}

  /* filters + products */
  .grid{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
  .filters{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.04)}
  .filter-group{margin-bottom:12px}
  .filter-group label{display:block;font-size:0.9rem;color:var(--muted);margin-bottom:8px}
  .checkbox{display:flex;align-items:center;gap:8px;margin:6px 0}

  .product-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px}
  .product{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.03);display:flex;flex-direction:column}
  .product img{width:100%;height:auto;object-fit:contain;background:linear-gradient(180deg,#fafafa,#fff);border-radius:8px}
  .product .title{font-weight:700;margin-top:10px}
  .product .desc{font-size:0.9rem;color:var(--muted);margin-top:6px}
  .price-row{display:flex;align-items:center;justify-content:space-between;margin-top:12px;flex-wrap:wrap;gap:8px}
  .price{font-weight:800;color:var(--primary)}
  .old{font-size:0.85rem;color:var(--muted);text-decoration:line-through}
  .tags{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .tag{background:rgba(14,165,164,0.1);padding:6px 8px;border-radius:8px;font-size:0.8rem;color:var(--accent)}

  /* cart */
  .cart{background:linear-gradient(180deg,#fff,#fcfffe);border-radius:12px;padding:16px;box-shadow:0 8px 30px rgba(2,6,23,0.06);position:sticky;top:24px}
  .cart-item img{width:48px;height:48px;object-fit:contain}

  /* modal */
  .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);padding:16px;z-index:60;}
  .modal .card{width:100%;max-width:620px;background:var(--card);border-radius:12px;padding:16px;display:grid;grid-template-columns:1fr;gap:16px}

  footer{margin-top:36px;padding:28px 0;color:var(--muted);font-size:0.9rem;text-align:center}

  /* üì± Responsive cho Mobile */
  @media (max-width: 980px){
    .hero{grid-template-columns:1fr}
    .grid{grid-template-columns:1fr}
    .cart{position:static;margin-top:16px}
    nav ul{flex-direction:column;align-items:flex-start;width:100%}
  }

  @media (max-width: 600px){
    .container{padding:12px}
    .hero-card{padding:16px}
    .hero h1{font-size:1.25rem}
    .site-title{font-size:1.1rem}
    .product-list{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}
    .btn{padding:8px 10px;font-size:0.85rem}
    .cart{padding:12px}
  }
</style>

</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo">HT</div>
        <div>
          <div class="site-title">Ho√†ng Tu·∫•n Mobile Store</div>
          <div class="muted">C·ª≠a h√†ng ƒëi·ªán tho·∫°i &amp; Ph·ª• ki·ªán</div>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="#">Trang ch·ªß</a></li>
          <li><a href="#products">S·∫£n ph·∫©m</a></li>
          <li><a href="#about">Gi·ªõi thi·ªáu</a></li>
          <li><a href="#contact">Li√™n h·ªá</a></li>
        </ul>
      </nav>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="badge muted">Xin ch√†o!</div>
        <button class="btn" id="open-cart">Gi·ªè h√†ng (<span id="cart-count">0</span>)</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1>Ch·ªçn ƒëi·ªán tho·∫°i ph√π h·ª£p ‚Äî gi√° t·ªët, b·∫£o h√†nh ch√≠nh h√£ng</h1> </p>

        <div class="searchbar">
          <input id="search" placeholder="T√¨m ki·∫øm: th∆∞∆°ng hi·ªáu, model, gi√°..." />
          <button class="btn" id="search-btn">T√¨m ki·∫øm</button>
        </div>

        <div style="display:flex;gap:12px;margin-top:18px">
          <div style="flex:1">
            <h4 class="muted">∆Øu ƒë√£i h√¥m nay</h4>
            <ul class="muted" style="margin:8px 0 0 16px">
              <li>Gi·∫£m ƒë·∫øn 30% cho h·ªçc sinh, sinh vi√™n</li>
              <li>Tr·∫£ g√≥p 0% l√£i su·∫•t (qua ƒë·ªëi t√°c)</li>
              <li>ƒê·ªïi m√°y c≈© l·∫•y m·ªõi - th√™m gi√° tr·ªã ƒë·∫øn 3.000.000‚Ç´</li>
            </ul>
          </div>
          <div style="width:260px;display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <div class="muted"> Contact</div>
            <div style="font-weight:800">Fb: V√µ Ho√†ng Tu·∫•n</div>
            <button class="btn" id="cta-sale">Xem khuy·∫øn m√£i</button>
          </div>
        </div>
      </div>

      <aside class="cart" id="side-cart">
        <h3>Gi·ªè h√†ng</h3>
        <div id="cart-items">
          <div class="muted">Gi·ªè h√†ng tr·ªëng ‚Äî th√™m s·∫£n ph·∫©m ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>
        </div>
        <div class="total-row" style="margin-top:18px">
          <div>T·ªïng:</div>
          <div id="cart-total">0‚Ç´</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button class="btn" id="checkout">Thanh to√°n</button>
          <button class="btn" id="clear-cart" style="background:#e6eef2;color:var(--primary)">X√≥a</button>
        </div>
      </aside>
    </section>

    <section class="grid">
      <aside class="filters">
        <h3>B·ªô l·ªçc</h3>
        <div class="filter-group">
          <label>Th∆∞∆°ng hi·ªáu</label>
          <div class="checkbox"><input type="checkbox" class="brand" value="Apple" id="b-apple"><label for="b-apple">Apple</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Samsung" id="b-samsung"><label for="b-samsung">Samsung</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Xiaomi" id="b-xiaomi"><label for="b-xiaomi">Xiaomi</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="OPPO" id="b-oppo"><label for="b-oppo">OPPO</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Asus" id="b-asus"><label for="b-asus">ASUS</label></div>
        </div>
        <div class="filter-group">
          <label>M·ª©c gi√°</label>
          <select id="price-range">
            <option value="any">T·∫•t c·∫£</option>
            <option value="0-4990000">D∆∞·ªõi 5.000.000‚Ç´</option>
            <option value="4990000-9990000">5.000.000 - 9.990.000‚Ç´</option>
            <option value="9990000-19990000">10.000.000 - 19.990.000‚Ç´</option>
            <option value="19990000">Tr√™n 20.000.000‚Ç´</option>
          </select>
        </div>
        <div class="filter-group">
          <label>S·∫Øp x·∫øp</label>
          <select id="sort-by">
            <option value="popular">Ph·ªï bi·∫øn</option>
            <option value="price-asc">Gi√° tƒÉng d·∫ßn</option>
            <option value="price-desc">Gi√° gi·∫£m d·∫ßn</option>
            <option value="newest">H√†ng m·ªõi</option>
          </select>
        </div>
        <div style="margin-top:12px">
          <button class="btn" id="apply-filters">√Åp d·ª•ng</button>
          <button class="btn" id="reset-filters" style="background:#e6eef2;color:var(--primary)">ƒê·∫∑t l·∫°i</button>
        </div>

        <hr style="margin:14px 0;border:0;border-top:1px solid #f1f5f9" />
        <h4>Th√¥ng tin c·ª≠a h√†ng</h4>
        <p class="muted">ƒê·ªãa ch·ªâ: 274 Nguy·ªÖn Ch√≠ Thanh, Ph∆∞·ªùng Tr√† Vinh,Vƒ©nh Long</p>
        <p class="muted">B·∫£o h√†nh: 12 th√°ng ch√≠nh h√£ng (t√πy model)</p>
      </aside>

      <div>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h2 id="products">S·∫£n ph·∫©m</h2>
          <div class="muted">Hi·ªÉn th·ªã <span id="product-count">0</span> s·∫£n ph·∫©m</div>
        </div>

        <div class="product-list" id="product-list">
          <!-- s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS -->
        </div>

        <!-- pagination (m√¥ ph·ªèng) -->
        <div style="display:flex;justify-content:center;margin-top:22px;gap:8px">
          <button class="btn" id="prev-page" style="background:#eef2f7;color:var(--primary)">Tr∆∞·ªõc</button>
          <div class="badge">Trang <span id="page-num">1</span></div>
          <button class="btn" id="next-page" style="background:#eef2f7;color:var(--primary)">Sau</button>
        </div>
      </div>
    </section>

    <!-- about -->
    <section id="about" style="margin-top:40px">
      <div style="display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start">
        <div class="hero-card">
          <h3>V·ªÅ HT MobileStore</h3>
          <p class="muted"> HT Mobile Store l√† c·ª≠a h√†ng ƒëi·ªán tho·∫°i m·∫´u. M·ª•c ti√™u l√† tr·∫£i nghi·ªám mua s·∫Øm online: t√¨m ki·∫øm, l·ªçc, so s√°nh, xem chi ti·∫øt s·∫£n ph·∫©m v√† thanh to√°n.</p>

          <h4 style="margin-top:12px">Ch√≠nh s√°ch b√°n h√†ng (m√¥ ph·ªèng)</h4>
          <ul class="muted">
            <li>Ho√†n ti·ªÅn trong 7 ng√†y n·∫øu l·ªói do nh√† s·∫£n xu·∫•t.</li>
            <li>H·ªó tr·ª£ tr·∫£ g√≥p qua ƒë·ªëi t√°c t√†i ch√≠nh 0% l√£i su·∫•t.</li>
            <li>Giao h√†ng trong 1-3 ng√†y t√πy khu v·ª±c.</li>
          </ul>
        </div>

        <div class="hero-card">
          <h4>Th√¥ng tin li√™n h·ªá</h4>
          <p class="muted">Email: vohtuan5599@mobilestore.com</p>
          <p class="muted">Hotline: 0357 957 957</p>
          <div style="margin-top:12px"><button class="btn" id="contact-btn">G·ª≠i tin nh·∫Øn</button></div>
        </div>
      </div>
    </section>

    <!-- contact / footer -->
    <section id="contact" style="margin-top:30px">
      <div class="hero-card">
        <h3>Li√™n h·ªá</h3>
        <form id="contact-form" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <input placeholder="H·ªç v√† t√™n" required />
          <input placeholder="S·ªë ƒëi·ªán tho·∫°i" required />
          <input placeholder="Email" />
          <input placeholder="Ch·ªß ƒë·ªÅ" />
          <textarea placeholder="N·ªôi dung" style="grid-column:1/ -1;min-height:120px"></textarea>
          <div style="grid-column:1/ -1;display:flex;gap:8px;justify-content:flex-end">
            <button class="btn" type="submit">G·ª≠i</button>
            <button class="btn" id="reset-contact" style="background:#e6eef2;color:var(--primary)" type="button">ƒê·∫∑t l·∫°i</button>
          </div>
        </form>
      </div>
    </section>

    <footer>
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div>
          <div style="font-weight:700">MobileZone</div>
          <div class="muted">¬© 2025 Ho√†ng Tu·∫•n Mobile Store .</div>
        </div>
        <div class="muted">Thanh to√°n: Visa, Mastercard, VNPay, MOMO , Shopee Pay</div>
      </div>
    </footer>
  </main>

  <!-- product detail modal template -->
  <template id="modal-tpl">
    <div class="modal" id="product-modal">
      <div class="card">
        <div>
          <img id="m-img" src="" alt="" style="width:100%;height:360px;object-fit:contain;border-radius:8px;background:#fff;padding:8px" />
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap" id="m-gallery"></div>
        </div>
        <div>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <h3 id="m-title"></h3>
            <div style="display:flex;gap:8px"><button class="btn" id="m-add">Th√™m v√†o gi·ªè</button><button class="btn" id="m-close" style="background:#e6eef2;color:var(--primary)">ƒê√≥ng</button></div>
          </div>
          <div class="muted" id="m-sub"></div>
          <div style="margin-top:12px" class="specs" id="m-specs"></div>
        </div>
      </div>
    </div>
  </template>

  <script>
    // MOCK DATA: danh s√°ch ƒëi·ªán tho·∫°i (mang t√≠nh minh h·ªça)
    const PRODUCTS = [
  {id:1,brand:'Apple',model:'iPhone 11',price:5990000,old:8900000,stock:20,desc:'Chip A13 Bionic, m√†n 6.1" LCD',img:'https://didongmango.com/images/products/2022/05/08/large/iphone-11-xanhla-600x600_1652028626.jpg',tags:['Ph·ªï bi·∫øn']},
  {id:2,brand:'Apple',model:'iPhone 12 Pro Max',price:15490000,old:18990000,stock:15,desc:'Chip A14, 6.7" OLED, 5G',img:'https://phucanhcdn.com/media/product/40798_iphone_12_pro_max_pacific_blue.jpg',tags:['B√°n ch·∫°y']},
  {id:3,brand:'Apple',model:'iPhone 13',price:11090000,old:15990000,stock:20,desc:'Chip A15, 6.1" OLED',img:'https://cdn.tgdd.vn/Products/Images/42/223602/iphone-13-midnight-2-600x600.jpg',tags:['Hot']},
  {id:4,brand:'Apple',model:'iPhone 13 Pro Max',price:16000000,old:21990000,stock:15,desc:'Chip A15, 120Hz, pin t·ªët',img:'https://cdn.tgdd.vn/Products/Images/42/250261/iphone-13-pro-max-silver-600x600.jpg',tags:['Tr·∫£ g√≥p']},
  {id:5,brand:'Apple',model:'iPhone 14 Pro',price:21990000,old:23990000,stock:12,desc:'Chip A16, 6.1", Dynamic Island',img:'https://halomobile.vn/wp-content/uploads/2022/07/iphone-14-pro-tim-min.png',tags:['Hot']},
  {id:6,brand:'Apple',model:'iPhone 15 Pro Max',price:27990000,old:30990000,stock:15,desc:'Chip A17 Pro, Titanium',img:'https://chungblackberry.com/wp-content/uploads/2024/04/15-prm-tn.png',tags:['Flagship']},
  {id:7,brand:'Apple',model:'iPhone 17 Pro',price:38990000,old:40990000,stock:10,desc:'Chip A19 Pro, OLED 120Hz',img:'https://www.didongmy.com/vnt_upload/product/09_2025/thumbs/(600x600)_iphone_17_pro_max_orange_thumb_didongmy.jpg',tags:['Si√™u ph·∫©m']},

  {id:8,brand:'Samsung',model:'Galaxy S23',price:18990000,old:20990000,stock:30,desc:'Snapdragon 8 Gen2, 6.1" AMOLED',img:'https://product.hstatic.net/1000370129/product/s23__tim_e7ac8994443f4240b27bfc62a2caac5e_master.jpg',tags:['B√°n ch·∫°y']},
  {id:9,brand:'Samsung',model:'Galaxy S24 Ultra',price:31990000,old:34990000,stock:22,desc:'Snapdragon 8 Gen3, b√∫t S-Pen',img:'https://cdn.tgdd.vn/Products/Images/42/307174/samsung-galaxy-s24-ultra-5g-600x600.jpg',tags:['Flagship']},
  {id:10,brand:'Samsung',model:'Galaxy A55',price:10990000,old:11990000,stock:40,desc:'Exynos 1480, AMOLED 120Hz',img:'https://cdn.tgdd.vn/Products/Images/42/303585/samsung-galaxy-a54-5g-tim-thumb-1-600x600.jpg',tags:['T·∫ßm trung']},

  {id:11,brand:'Xiaomi',model:'Redmi Note 12',price:4990000,old:5990000,stock:20,desc:'M√†n 6.7", pin 5000mAh',img:'https://product.hstatic.net/1000370129/product/xiaomi_redmi_note_12_turbo_white-digiphone_06efc0a8c8f949e2ad736194241c9f1f_grande.jpg',tags:['Gi√° r·∫ª']},
  {id:12,brand:'Xiaomi',model:'13T Pro',price:15990000,old:17990000,stock:26,desc:'Dimensity 9200+, camera Leica',img:'https://cdn.tgdd.vn/Products/Images/42/309816/xiaomi-13t-pro-xanh-thumb-600x600.jpg',tags:['Camera ƒë·∫πp']},

  {id:13,brand:'OPPO',model:'Reno10 5G',price:9990000,old:11490000,stock:45,desc:'Camera tele 32MP, s·∫°c nhanh 67W',img:'https://cdn.tgdd.vn/Products/Images/42/309722/oppo-reno10-blue-thumbnew-600x600.jpg',tags:['T·∫ßm trung']},
  {id:14,brand:'OPPO',model:'Find N3 Flip',price:22990000,old:24990000,stock:15,desc:'ƒêi·ªán tho·∫°i g·∫≠p, camera Hasselblad',img:'https://cdn.tgdd.vn/Products/Images/42/309835/oppo-n3-flip-den-thumbai-600x600.jpg',tags:['Cao c·∫•p']},

  {id:15,brand:'Vivo',model:'V30',price:8990000,old:9990000,stock:55,desc:'Snapdragon 7 Gen3, camera 50MP',img:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3EbPU_afKrckcw-rNrjDTIHqeMq50vlcIoQ&s',tags:['ƒê·∫πp']},
  {id:16,brand:'Vivo',model:'Y17s',price:4290000,old:4990000,stock:90,desc:'Helio G85, pin 5000mAh',img:'https://cdn.tgdd.vn/Products/Images/42/314975/vivo-y17s-thumb-600x600.jpg',tags:['Gi√° r·∫ª']},

  {id:17,brand:'Realme',model:'11 Pro+',price:8990000,old:9990000,stock:60,desc:'Camera 200MP, s·∫°c nhanh 100W',img:'https://cdn.tgdd.vn/Products/Images/42/309821/realme-11-pro-plus-5g-thumb-600x600.jpeg',tags:['Hot']},
  {id:18,brand:'Realme',model:'C67',price:4790000,old:5390000,stock:80,desc:'Helio G85, camera 108MP',img:'https://cdn.tgdd.vn/Products/Images/42/319658/realme-c67-xanh-thumb-600x600.jpg',tags:['Gi√° r·∫ª']},

  {id:19,brand:'Huawei',model:'P60 Pro',price:22990000,old:24990000,stock:12,desc:'Snapdragon 8+ Gen1, camera XMAGE',img:'https://cdn2.cellphones.com.vn/x/media/catalog/product/_/t/_ter3434_3_.jpg',tags:['Flagship']},
  {id:20,brand:'Google',model:'Pixel 8 Pro',price:21990000,old:23990000,stock:15,desc:'Tensor G3, m√†n 120Hz',img:'https://sonpixel.vn/wp-content/uploads/2023/08/Google-Pixel-8-Pro-SonPixel.jpg',tags:['Flagship']},

  {id:21,brand:'Asus',model:'ROG Phone 7',price:22990000,old:24990000,stock:10,desc:'Snapdragon 8 Gen2, d√†nh cho game th·ªß',img:'https://cdn.tgdd.vn/Products/Images/42/302945/asus-rog-phone-7-600x600.jpg',tags:['Gaming']},
  {id:22,brand:'Asus',model:'Zenfone 10',price:15990000,old:17990000,stock:10,desc:'Snapdragon 8 Gen2, nh·ªè g·ªçn 5.9"',img:'https://cdn.tgdd.vn/Products/Images/42/304435/asus-zenfone-10-600x600.jpg',tags:['Nh·ªè g·ªçn']},
  {id:23,brand:'Sony',model:'Xperia 1 V',price:31990000,old:34990000,stock:5,desc:'Snapdragon 8 Gen2, m√†n 4K OLED',img:'https://product.hstatic.net/1000370129/product/xperia-1-v-mark-5-trang_0bd74a402a6646f2a72d0c7519a13846_master_2423e0bf5fac4163a99e0316976dc10c.png',tags:['Camera t·ªët']},
  {id:24,brand:'Nokia',model:'G60 5G',price:6990000,old:7990000,stock:40,desc:'Snapdragon 695, pin 4500mAh',img:'https://cdn2.cellphones.com.vn/x/media/catalog/product/2/2/221ws.jpg',tags:['B·ªÅn b·ªâ']}


];


    // state
    let state = {
      products: PRODUCTS.slice(),
      page:1,
      perPage:8,
      cart:{},
      filters:{brands:[],price:'any',sort:'popular',q:''}
    };

    // util - format VND
    function formatVND(n){
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + '‚Ç´';
    }

    // render products
    function renderProducts(){
      let list = document.getElementById('product-list');
      list.innerHTML = '';
      // apply filters
      let filtered = state.products.filter(p => {
        const brands = state.filters.brands;
        if(brands.length && !brands.includes(p.brand)) return false;
        if(state.filters.price!=='any'){
          const pr = state.filters.price;
          if(pr.includes('-')){
            const [min,max] = pr.split('-').map(Number);
            if(p.price < min || p.price > max) return false;
          } else {
            const min = Number(pr);
            if(p.price < min) return false;
          }
        }
        if(state.filters.q){
          const q = state.filters.q.toLowerCase();
          if(!(p.model.toLowerCase().includes(q) || p.brand.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q))) return false;
        }
        return true;
      });

      // sort
      if(state.filters.sort === 'price-asc') filtered.sort((a,b)=>a.price-b.price);
      if(state.filters.sort === 'price-desc') filtered.sort((a,b)=>b.price-a.price);
      if(state.filters.sort === 'newest') filtered.sort((a,b)=>b.id-a.id);

      // pagination
      const total = filtered.length;
      const start = (state.page-1)*state.perPage;
      const pageItems = filtered.slice(start,start+state.perPage);

      document.getElementById('product-count').textContent = total;
      document.getElementById('page-num').textContent = state.page;

      pageItems.forEach(p => {
        const node = document.createElement('div'); node.className='product';
        node.innerHTML = `
          <img src="${p.img}" alt="${p.model}" />
          <div class="title">${p.brand} ${p.model}</div>
          <div class="desc">${p.desc}</div>
          <div class="tags">${p.tags.map(t=>`<div class="tag">${t}</div>`).join('')}</div>
          <div class="price-row">
            <div>
              <div class="price">${formatVND(p.price)}</div>
              ${p.old ? `<div class="old">${formatVND(p.old)}</div>` : ''}
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn btn-add" data-id="${p.id}">Th√™m</button>
              <button class="btn" style="background:#eef2f7;color:var(--primary)" data-id="${p.id}" data-action="view">Xem</button>
            </div>
          </div>
        `;
        list.appendChild(node);
      });

      // update product list count
      document.getElementById('product-list').dispatchEvent(new CustomEvent('updated'));
    }

    // cart management
    function addToCart(id,qty=1){
      const p = state.products.find(x=>x.id==id);
      if(!p) return alert('S·∫£n ph·∫©m kh√¥ng t·ªìn t·∫°i');
      if(!state.cart[id]) state.cart[id] = {...p, qty:0};
      state.cart[id].qty += qty;
      if(state.cart[id].qty > p.stock) state.cart[id].qty = p.stock;
      renderCart();
    }
    function removeFromCart(id){ delete state.cart[id]; renderCart(); }
    function changeQty(id,delta){ if(!state.cart[id]) return; state.cart[id].qty += delta; if(state.cart[id].qty<=0) removeFromCart(id); else if(state.cart[id].qty>state.cart[id].stock) state.cart[id].qty = state.cart[id].stock; renderCart(); }
    function clearCart(){ state.cart = {}; renderCart(); }

    function renderCart(){
      const wrap = document.getElementById('cart-items');
      wrap.innerHTML = '';
      const ids = Object.keys(state.cart);
      if(ids.length===0){ wrap.innerHTML = '<div class="muted">Gi·ªè h√†ng tr·ªëng ‚Äî th√™m s·∫£n ph·∫©m ƒë·ªÉ b·∫Øt ƒë·∫ßu.</div>'; }
      let total = 0;
      ids.forEach(id => {
        const it = state.cart[id];
        total += it.price * it.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${it.img}" alt="${it.model}" />
          <div style="flex:1">
            <div style="font-weight:700">${it.brand} ${it.model}</div>
            <div class="muted">${formatVND(it.price)} x ${it.qty}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <div class="qty">
              <button data-action="dec" data-id="${it.id}">-</button>
              <div style="padding:6px 10px;border-radius:8px;border:1px solid #eef2f7">${it.qty}</div>
              <button data-action="inc" data-id="${it.id}">+</button>
            </div>
            <button data-action="remove" data-id="${it.id}" style="background:transparent;border:0;color:var(--muted);cursor:pointer">X√≥a</button>
          </div>
        `;
        wrap.appendChild(div);
      });
      document.getElementById('cart-total').textContent = formatVND(total);
      document.getElementById('cart-count').textContent = ids.length;
    }

    // product modal
    function openProduct(id){
      const p = state.products.find(x=>x.id==id);
      if(!p) return;
      const tpl = document.getElementById('modal-tpl');
      const clone = tpl.content.cloneNode(true);
      clone.querySelector('#m-img').src = p.img;
      clone.querySelector('#m-title').textContent = `${p.brand} ${p.model}`;
      clone.querySelector('#m-sub').textContent = p.desc + ' ‚Äî C√≤n ' + p.stock + ' s·∫£n ph·∫©m';
      clone.querySelector('#m-specs').innerHTML = `
        <ul>
          <li>Gi√°: ${formatVND(p.price)}</li>
          ${p.old?'<li>Gi√° c≈©: '+formatVND(p.old)+'</li>':''}
          <li>Kho: ${p.stock}</li>
          <li>M√¥ t·∫£: ${p.desc}</li>
        </ul>
      `;
      const modal = clone.querySelector('.modal');
      document.body.appendChild(modal);
      modal.querySelector('#m-close').addEventListener('click', ()=>modal.remove());
      modal.querySelector('#m-add').addEventListener('click', ()=>{ addToCart(p.id); modal.remove(); });
    }

    // wire events
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t.matches('.btn-add')) addToCart(t.dataset.id);
      if(t.dataset.action==='view') openProduct(t.dataset.id);
      if(t.id==='open-cart'){
        // scroll to cart
        document.getElementById('side-cart').scrollIntoView({behavior:'smooth'});
      }
      if(t.dataset.action==='remove') removeFromCart(t.dataset.id);
      if(t.dataset.action==='inc') changeQty(t.dataset.id,1);
      if(t.dataset.action==='dec') changeQty(t.dataset.id,-1);
      if(t.id==='clear-cart') clearCart();
      if(t.id==='checkout'){
        // mock checkout
        if(Object.keys(state.cart).length===0) return alert('Gi·ªè h√†ng tr·ªëng');
        const total = Object.values(state.cart).reduce((s,it)=>s+it.price*it.qty,0);
        const ok = confirm('T·ªïng thanh to√°n: ' + formatVND(total) + '\nTi·∫øn h√†nh m√¥ ph·ªèng thanh to√°n?');
        if(ok){ alert('C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t h√†ng! (M√¥ ph·ªèng)'); clearCart(); }
      }
    });

    // search & filters
    document.getElementById('search-btn').addEventListener('click', ()=>{ state.filters.q = document.getElementById('search').value.trim(); state.page=1; renderProducts(); });
    document.getElementById('apply-filters').addEventListener('click', ()=>{
      const brands = Array.from(document.querySelectorAll('.brand:checked')).map(el=>el.value);
      state.filters.brands = brands;
      state.filters.price = document.getElementById('price-range').value;
      state.filters.sort = document.getElementById('sort-by').value;
      state.page = 1;
      renderProducts();
    });
    document.getElementById('reset-filters').addEventListener('click', ()=>{
      document.querySelectorAll('.brand').forEach(b=>b.checked=false);
      document.getElementById('price-range').value='any';
      document.getElementById('sort-by').value='popular';
      state.filters = {brands:[],price:'any',sort:'popular',q:''};
      document.getElementById('search').value='';
      state.page=1; renderProducts();
    });

    document.getElementById('prev-page').addEventListener('click', ()=>{ if(state.page>1){ state.page--; renderProducts(); } });
    document.getElementById('next-page').addEventListener('click', ()=>{ state.page++; renderProducts(); });

    // product list updated event
    document.getElementById('product-list').addEventListener('updated', ()=>{
      // ensure page not out of range
      const total = document.getElementById('product-count').textContent*1;
      const maxPage = Math.max(1, Math.ceil(total/state.perPage));
      if(state.page>maxPage) state.page = maxPage;
      document.getElementById('page-num').textContent = state.page;
    });

    // contact form
    document.getElementById('contact-form').addEventListener('submit', (e)=>{
      e.preventDefault(); alert('C·∫£m ∆°n! Tin nh·∫Øn c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c g·ª≠i (m√¥ ph·ªèng).'); e.target.reset();
    });

    // initial render
    renderProducts();
    renderCart();

    // small UX: keyboard Enter to search
    document.getElementById('search').addEventListener('keydown', (e)=>{ if(e.key==='Enter') document.getElementById('search-btn').click(); });

    // sample: prefill filters from URL (m√¥ ph·ªèng)
    (function readQuery(){
      const params = new URLSearchParams(location.search);
      if(params.get('q')){ document.getElementById('search').value = params.get('q'); state.filters.q = params.get('q'); }
    })();
  </script>
</body>
</html>
