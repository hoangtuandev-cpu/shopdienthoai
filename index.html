<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HT Mobile - Điện thoại & Phụ kiện chính hãng</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="HT Mobile - Cửa hàng điện thoại Hoàng Tuấn chuyên cung cấp điện thoại và phụ kiện chính hãng. Mua sắm online với nhiều ưu đãi, thanh toán dễ dàng, bảo hành chính hãng." />
  <meta name="keywords" content="điện thoại, smartphone, phụ kiện, apple, samsung, xiaomi, oppo, chính hãng" />
  <meta name="author" content="Hoàng Tuấn" />
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3820/3820331.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- External Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js" defer></script>
  <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://htmobile.com/">
  <meta property="og:title" content="HT Mobile - Điện thoại & Phụ kiện chính hãng">
  <meta property="og:description" content="Cửa hàng điện thoại Hoàng Tuấn chuyên cung cấp điện thoại và phụ kiện chính hãng">
  <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/3820/3820331.png">
<style>
  
  :root{
    --primary:#0f172a;
    --accent:#0ea5a4;
    --muted:#64748b;
    --bg:#f8fafc;
    --card:#ffffff;
    --glass: rgba(255,255,255,0.6);
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2f7);color:var(--primary);font-size:16px;line-height:1.5}
  img{max-width:100%;height:auto;display:block}

  header{
    background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%);
    border-bottom: 1px solid rgba(255,255,255,0.1);
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  .container{max-width:1200px;margin:0 auto;padding:20px;}
  .nav{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#34d399);display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
  .site-title{font-size:1.25rem;font-weight:700}
  nav ul{display:flex;gap:14px;list-style:none;padding:0;margin:0;flex-wrap:wrap}
  nav a{color:var(--primary);text-decoration:none;padding:8px 10px;border-radius:8px}
  nav a:hover{background:rgba(14,165,164,0.08)}

  /* hero */
  .hero{display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center;padding:28px 0}
  .hero-card{background:var(--card);border-radius:14px;padding:24px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
  .hero h1{margin:0;font-size:1.75rem}
  .hero p{color:var(--muted);margin-top:8px}
  .searchbar{display:flex;gap:8px;margin-top:16px;flex-wrap:wrap}
  .searchbar input{flex:1;min-width:160px;padding:12px 14px;border-radius:10px;border:1px solid #e6eef2;font-size:0.95rem}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer;white-space:nowrap}

  /* filters + products */
  .grid{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
  .filters{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.04)}
  .filter-group{margin-bottom:12px}
  .filter-group label{display:block;font-size:0.9rem;color:var(--muted);margin-bottom:8px}
  .checkbox{display:flex;align-items:center;gap:8px;margin:6px 0}

  .product-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:16px}
  .product{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.03);display:flex;flex-direction:column}
  .product img{width:100%;height:auto;object-fit:contain;background:linear-gradient(180deg,#fafafa,#fff);border-radius:8px}
  .product .title{font-weight:700;margin-top:10px}
  .product .desc{font-size:0.9rem;color:var(--muted);margin-top:6px}
  .price-row{display:flex;align-items:center;justify-content:space-between;margin-top:12px;flex-wrap:wrap;gap:8px}
  .price{font-weight:800;color:var(--primary)}
  .old{font-size:0.85rem;color:var(--muted);text-decoration:line-through}
  .tags{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .tag{background:rgba(14,165,164,0.1);padding:6px 8px;border-radius:8px;font-size:0.8rem;color:var(--accent)}
  color: var(--accent);
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(2,6,23,0.08);
  z-index: 2;
  transition: all 0.2s;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent);
    border-radius: inherit;
    pointer-events: none;
  }

  /* cart */
  .cart{background:linear-gradient(180deg,#fff,#fcfffe);border-radius:12px;padding:16px;box-shadow:0 8px 30px rgba(2,6,23,0.06);position:sticky;top:24px}
  .cart-item img{width:48px;height:48px;object-fit:contain}

  /* Rating & Wishlist */
  .wishlist-btn {
    position: absolute;
    top: 10px;
    left: 10px;
    background: white;
    border: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    color: var(--accent);
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(2,6,23,0.08);
    z-index: 2;
    transition: all 0.2s;
  }
  :root {
    --primary: #232946;
    --accent: #00b4d8;
    --muted: #6b7280;
    --bg: #f6f8fa;
    --card: #fff;
    --glass: rgba(255,255,255,0.7);
    --gradient: linear-gradient(135deg, #00b4d8 0%, #48cae4 100%);
    font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--bg);
    color: var(--primary);
    font-size: 16px;
    line-height: 1.6;
    min-height: 100vh;
    transition: background 0.3s;
  }
  img { max-width: 100%; height: auto; display: block; border-radius: 12px; }

  header {
    background: var(--gradient);
    color: #fff;
    box-shadow: 0 4px 24px rgba(0,180,216,0.08);
    padding: 0;
  }
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 24px;
  }
  .nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 24px;
    flex-wrap: wrap;
  }
  .brand {
    display: flex;
    align-items: center;
    gap: 16px;
  }
  .logo {
    width: 56px;
    height: 56px;
    border-radius: 16px;
    background: var(--gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-weight: 900;
    font-size: 1.5rem;
    box-shadow: 0 4px 16px rgba(0,180,216,0.12);
  }
  .site-title {
    font-size: 1.35rem;
    font-weight: 800;
    color: #232946;
    letter-spacing: 1px;
  }
  nav ul {
    display: flex;
    justify-content: space-between;
    list-style: none;
    padding: 0;
    margin: 0;
    width: 100%;
    max-width: 600px;
  }
  nav a {
    color: white;
    text-decoration: none;
    padding: 12px 20px;
    border-radius: 10px;
    font-weight: 600;
    transition: all 0.2s ease;
    display: block;
    width: 100%;
    text-align: center;
  }
  nav a:hover {
    background: rgba(255,255,255,0.1);
    transform: translateY(-2px);
  }
  nav a:hover {
    background: rgba(0,180,216,0.12);
    color: var(--accent);
  }

  /* Hero Section */
  .hero {
    display: flex;
    flex-direction: column;
    gap: 32px;
    align-items: stretch;
    padding: 40px 0 0 0;
    background: linear-gradient(180deg,#e0f7fa 0%,#f6f8fa 100%);
  }
  .hero-card {
    background: var(--card);
    border-radius: 20px;
    padding: 40px 32px;
    box-shadow: 0 8px 32px rgba(0,180,216,0.08);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 24px;
  }
  .hero h1 {
    margin: 0;
    font-size: 2.2rem;
    font-weight: 900;
    color: var(--primary);
    letter-spacing: 1px;
    line-height: 1.2;
  }
  .hero p {
    color: var(--muted);
    margin-top: 10px;
    font-size: 1.1rem;
  }
  .searchbar {
    display: flex;
    gap: 12px;
    margin-top: 18px;
    width: 100%;
    flex-wrap: wrap;
  }
  .searchbar input {
    flex: 1;
    min-width: 180px;
    padding: 14px 16px;
    border-radius: 12px;
    border: 1px solid #e0e7ef;
    font-size: 1rem;
    background: #f6f8fa;
    transition: border 0.2s;
  }
  .searchbar input:focus {
    border: 1.5px solid var(--accent);
    outline: none;
  }
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 18px;
    border-radius: 12px;
    border: 0;
    background: var(--accent);
    color: #fff;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,180,216,0.08);
    transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
  }
  .btn:hover {
    background: #48cae4;
    transform: translateY(-2px) scale(1.04);
    box-shadow: 0 6px 18px rgba(0,180,216,0.12);
  }

  /* Card Layout */
  .grid {
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 32px;
    margin-top: 32px;
  }
  .filters {
    background: var(--card);
    padding: 24px;
    border-radius: 16px;
    box-shadow: 0 6px 24px rgba(0,180,216,0.06);
    min-width: 220px;
  }
  .filter-group {
    margin-bottom: 18px;
  }
  .filter-group label {
    display: block;
    font-size: 1rem;
    color: var(--muted);
    margin-bottom: 10px;
    font-weight: 600;
  }
  .checkbox {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 8px 0;
  }

  .product-list {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap: 24px;
  }
  .product {
    background: var(--card);
    border-radius: 18px;
    padding: 18px;
    box-shadow: 0 6px 24px rgba(0,180,216,0.06);
    display: flex;
    flex-direction: column;
    position: relative;
    transition: box-shadow 0.2s, transform 0.2s;
    min-height: 380px;
  }
  .product:hover {
    box-shadow: 0 12px 32px rgba(0,180,216,0.12);
    transform: translateY(-4px) scale(1.02);
  }
  .product img {
    width: 100%;
    height: 180px;
    object-fit: contain;
    background: linear-gradient(180deg,#e0f7fa,#fff);
    border-radius: 12px;
    margin-bottom: 12px;
  }
  .product .title {
    font-weight: 800;
    font-size: 1.1rem;
    margin-top: 8px;
    color: var(--primary);
  }
  .product .desc {
    font-size: 0.98rem;
    color: var(--muted);
    margin-top: 6px;
    margin-bottom: 8px;
  }
  .price-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 14px;
    flex-wrap: wrap;
    gap: 10px;
  }
  .price {
    font-weight: 900;
    color: var(--accent);
    font-size: 1.15rem;
  }
  .old {
    font-size: 0.95rem;
    color: #b0b7c3;
    text-decoration: line-through;
    margin-left: 8px;
  }
  .tags {
    display: flex;
    gap: 10px;
    margin-top: 10px;
    flex-wrap: wrap;
  }
  .tag {
    background: rgba(0,180,216,0.12);
    padding: 7px 10px;
    border-radius: 10px;
    font-size: 0.9rem;
    color: var(--accent);
    font-weight: 600;
  }

  /* Cart Modal */
  .cart-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(35,41,70,0.45);
    backdrop-filter: blur(6px);
    z-index: 100;
    padding: 24px;
  }
  .cart-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .cart-content {
    width: 100%;
    max-width: 540px;
    background: var(--card);
    border-radius: 20px;
    padding: 32px;
    box-shadow: 0 20px 50px rgba(35,41,70,0.12);
  }
  .cart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 24px;
  }
  .cart-items {
    max-height: 400px;
    overflow-y: auto;
    margin: -8px;
    padding: 8px;
  }
  .cart-item {
    display: flex;
    align-items: center;
    gap: 18px;
    padding: 14px;
    border-radius: 14px;
    margin-bottom: 10px;
    background: rgba(0,180,216,0.04);
  }
  .cart-footer {
    margin-top: 24px;
    padding-top: 24px;
    border-top: 1px solid rgba(35,41,70,0.08);
  }
  .cart-total {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 700;
    font-size: 1.15rem;
    margin-bottom: 18px;
    color: var(--accent);
  }

  /* Footer */
  footer {
    margin-top: 48px;
    padding: 32px 0;
    color: var(--muted);
    font-size: 1rem;
    text-align: center;
    background: linear-gradient(90deg,#e0f7fa,#f6f8fa);
    border-top: 1px solid #e0e7ef;
  }
  .user-dropdown {
    background: var(--card);
    border-radius: 12px;
    padding: 16px;
    margin-top: 8px;
    box-shadow: 0 20px 50px rgba(2,6,23,0.1);
    display: none;
    z-index: 50;
  }
  .user-dropdown.active {
    display: block;
    animation: slideDown 0.2s ease-out;
  }
  .user-info {
    display: flex;
    gap: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid rgba(2,6,23,0.06);
    margin-bottom: 12px;
  }
  .user-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent), #34d399);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 1.2rem;
  }
  .rank-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 500;
  }
  .rank-bronze {
    background: #fef3c7;
    color: #92400e;
  }
  .rank-silver {
    background: #f1f5f9;
    color: #475569;
  }
  .rank-gold {
    background: #fff7ed;
    color: #9a3412;
  }
  .rank-platinum {
    background: linear-gradient(135deg, #e0f2fe, #f0f9ff);
    color: #0369a1;
  }
  .rank-diamond {
    background: linear-gradient(135deg, #e0e7ff, #eef2ff);
    color: #3730a3;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Cart Modal */
  .modal{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(2,6,23,0.45);
    backdrop-filter: blur(4px);
    padding:16px;
    z-index:60;
  }
  .modal .card{
    width:100%;
    max-width:520px;
    background:var(--card);
    border-radius:16px;
    padding:24px;
    display:grid;
    grid-template-columns:1fr;
    gap:20px;
    box-shadow: 0 20px 50px rgba(2,6,23,0.1);
  }
  
  .cart-modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(2,6,23,0.45);
    backdrop-filter: blur(4px);
    z-index: 100;
    padding: 20px;
  }
  .cart-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .cart-content {
    width: 100%;
    max-width: 520px;
    background: var(--card);
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 20px 50px rgba(2,6,23,0.1);
  }
  .cart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .cart-items {
    max-height: 400px;
    overflow-y: auto;
    margin: -8px;
    padding: 8px;
  }
  .cart-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px;
    border-radius: 12px;
    margin-bottom: 8px;
    background: rgba(14,165,164,0.03);
  }
  .cart-footer {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid rgba(2,6,23,0.06);
  }
  .cart-total {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    font-size: 1.1rem;
    margin-bottom: 16px;
  }

  footer{margin-top:36px;padding:28px 0;color:var(--muted);font-size:0.9rem;text-align:center}

  /* Loading Screen */
  .loading-screen {
    position: fixed;
    inset: 0;
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.5s, visibility 0.5s;
  }
  .loading-screen.fade-out {
    opacity: 0;
    visibility: hidden;
  }
  .loading-animation {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
  }
  .loading-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  .loading-logo {
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, var(--accent), #34d399);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: pulse 2s infinite;
  }

  /* 🎨 Effects & Animations */
  .product{position:relative;transition:all 0.3s cubic-bezier(.2,.9,.3,1)}
  .product:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(2,6,23,0.08)}
  .product img{transition:all 0.4s cubic-bezier(.2,.9,.3,1)}
  .product:hover img{transform:scale(1.05)}
  
  /* Pulse Effect cho nút */
  .btn{position:relative;overflow:hidden}
  .btn:after{content:'';position:absolute;inset:0;background:rgba(255,255,255,0.2);opacity:0;transition:0.2s}
  .btn:hover:after{opacity:1}
  .btn:active:after{opacity:0;transition:0s}
  
  /* Badge Animation */
  @keyframes pulse{
    0%{transform:scale(1)}
    50%{transform:scale(1.05)}
    100%{transform:scale(1)}
  }
  .badge.highlight{animation:pulse 0.6s ease-out}
  
  /* Skeleton Loading */
  @keyframes shimmer{
    0%{background-position:-200% 0}
    100%{background-position:200% 0}
  }
  .skeleton{
    background:linear-gradient(90deg,#f0f0f0 25%,#f8f8f8 50%,#f0f0f0 75%);
    background-size:200% 100%;
    animation:shimmer 1.5s infinite linear;
  }
  
  /* Icon Animations */
  .icon-spin{animation:spin 1s linear infinite}
  .icon-bounce{animation:bounce 0.6s cubic-bezier(.2,.9,.3,1)}
  @keyframes spin{100%{transform:rotate(360deg)}}
  @keyframes bounce{
    50%{transform:scale(1.2)}
    100%{transform:scale(1)}
  }
  
  @keyframes slideIn {
    from {
      transform: translateX(-100px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOut {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(-100px);
      opacity: 0;
    }
  }

  @keyframes slideInRight {
    from {
      transform: translateX(100px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes slideOutRight {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100px);
      opacity: 0;
    }
  }
  
  /* Hover Effects */
  .hover-lift{transition:transform 0.2s}
  .hover-lift:hover{transform:translateY(-2px)}
  
  .hover-glow{transition:box-shadow 0.2s}
  .hover-glow:hover{box-shadow:0 0 20px rgba(14,165,164,0.15)}
  
  .toast{position:fixed;right:20px;top:20px;z-index:100;pointer-events:none}
  .toast-card{transform:translateY(-10px);opacity:0;transition:all 320ms cubic-bezier(.2,.9,.3,1);background:linear-gradient(90deg,#ecfdf5,#f0fdf4);border-radius:12px;padding:12px 16px;box-shadow:0 12px 30px rgba(2,6,23,0.12);display:flex;align-items:center;gap:12px;pointer-events:auto;backdrop-filter:blur(4px)}
  
  .mobile-checkout{position:fixed;left:0;right:0;bottom:0;padding:12px 16px;background:linear-gradient(180deg,#fff,#f7fffb);box-shadow:0 -8px 30px rgba(2,6,23,0.06);z-index:80;display:none}
  .mobile-checkout .promo{display:flex;gap:8px;flex:1}
  .mobile-checkout input{flex:1;padding:8px 12px;border-radius:8px;border:1px solid #e6eef2}
  
  @keyframes addToCart{
    0%{transform:scale(1) rotate(0deg)}
    50%{transform:scale(1.4) rotate(-10deg)}
    100%{transform:scale(1) rotate(0deg)}
  }
  .cart-bump{animation:addToCart 0.4s ease-out}

  /* 📱 Responsive cho Mobile */
  /* Menu Mobile */
  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    gap: 4px;
    cursor: pointer;
    padding: 8px;
  }
  .mobile-menu-toggle span {
    width: 24px;
    height: 2px;
    background: var(--primary);
    transition: 0.3s;
  }
  .mobile-menu-active .mobile-menu-toggle span:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px);
  }
  .mobile-menu-active .mobile-menu-toggle span:nth-child(2) {
    opacity: 0;
  }
  .mobile-menu-active .mobile-menu-toggle span:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px);
  }

  /* Sections */
  .section {
    padding: 40px 0;
    scroll-margin-top: 80px;
  }
  .section-title {
    font-size: 1.5rem;
    margin-bottom: 24px;
    text-align: center;
  }
  .about-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
    margin-top: 32px;
  }
  .about-card {
    background: var(--card);
    padding: 24px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 8px 30px rgba(2,6,23,0.06);
  }
  .about-card svg {
    width: 48px;
    height: 48px;
    margin: 0 auto 16px;
  }
  .contact-form {
    max-width: 600px;
    margin: 0 auto;
    background: var(--card);
    padding: 32px;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(2,6,23,0.06);
  }
  .form-group {
    margin-bottom: 20px;
  }
  .form-group label {
    display: block;
    margin-bottom: 8px;
    color: var(--muted);
  }
  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #e6eef2;
    border-radius: 8px;
    font-size: 1rem;
  }
  .form-group textarea {
    height: 120px;
    resize: vertical;
  }

  @media (max-width: 980px){
    .hero{grid-template-columns:1fr}
    .grid{grid-template-columns:1fr}
    .cart{position:static;margin-top:16px}
    
    /* Navigation */
    .mobile-menu-toggle {
      display: flex;
    }
    nav {
      position: fixed;
      top: 72px;
      left: 0;
      right: 0;
      background: var(--card);
      padding: 16px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.06);
      transform: translateY(-120%);
      transition: transform 0.3s;
      z-index: 90;
    }
    .mobile-menu-active nav {
      transform: translateY(0);
    }
    nav ul {
      flex-direction: column;
      align-items: flex-start;
      width: 100%;
    }
    nav a {
      width: 100%;
      padding: 12px;
    }

    /* About Section */
    .about-grid {
      grid-template-columns: 1fr;
      gap: 16px;
    }
  }

  @media (max-width: 600px){
    .container{padding:12px}
    .hero-card{padding:16px}
    .hero h1{font-size:1.25rem}
    .site-title{font-size:1.1rem}
    .product-list{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}
    .btn{padding:8px 10px;font-size:0.85rem}
    .cart{padding:12px}
    
    /* Section Adjustments */
    .section {
      padding: 24px 0;
    }
    .section-title {
      font-size: 1.25rem;
      margin-bottom: 16px;
    }
    .contact-form {
      padding: 20px;
    }
  }
</style>

</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loading-screen">
    <div class="loading-animation">
      <div class="loading-spinner"></div>
      <div class="loading-logo">HT Mobile</div>
    </div>
  </div>

  <header>
    <div class="container nav">
      <div class="brand" style="flex:1;min-width:180px;display:flex;align-items:center;gap:16px;">
        <div class="logo" style="background: rgba(255,255,255,0.2);box-shadow: 0 4px 15px rgba(0,0,0,0.1);">HT</div>
        <div>
          <div class="site-title" style="color: white;text-shadow: 0 2px 4px rgba(0,0,0,0.1);">Hoàng Tuấn Mobile Store</div>
          <div style="color: rgba(255,255,255,0.8);">Cửa hàng điện thoại &amp; Phụ kiện</div>
        </div>
      </div>
      <nav style="flex:2;display:flex;justify-content:center;align-items:center;">
        <ul style="display:flex;justify-content:space-between;width:100%;max-width:600px;list-style:none;padding:0;margin:0;">
          <li style="flex:1;text-align:center;"><a href="#" class="nav-link hover-lift" style="display:block;padding:12px 0;"><i class="fas fa-home"></i> Trang chủ</a></li>
          <li style="flex:1;text-align:center;"><a href="#products" class="nav-link hover-lift" style="display:block;padding:12px 0;"><i class="fas fa-mobile-alt"></i> Sản phẩm</a></li>
          <li style="flex:1;text-align:center;"><a href="#about" class="nav-link hover-lift" style="display:block;padding:12px 0;"><i class="fas fa-info-circle"></i> Giới thiệu</a></li>
          <li style="flex:1;text-align:center;"><a href="#contact" class="nav-link hover-lift" style="display:block;padding:12px 0;"><i class="fas fa-envelope"></i> Liên hệ</a></li>
        </ul>
      </nav>
      <div style="flex:1;display:flex;align-items:center;justify-content:flex-end;gap:20px;min-width:180px;">
        <button class="btn hover-lift" onclick="toggleCart()">
          <i class="fas fa-shopping-cart"></i>
          Giỏ hàng (<span id="cart-count">0</span>)
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1>
          <span style="display:block;font-size:0.9em;color:var(--accent);margin-bottom:8px">
            Premium Smartphone Store
          </span>
          Trải nghiệm công nghệ đỉnh cao cùng bộ sưu tập smartphone cao cấp
        </h1>

        <div class="searchbar" style="margin-top:24px">
          <input id="search" placeholder="Tìm kiếm smartphone yêu thích của bạn..." />
          <button class="btn hover-lift" id="search-btn">
            <i class="fas fa-search"></i>
            Tìm kiếm
          </button>
        </div>

        <div style="display:flex;gap:24px;margin-top:32px">
          <div style="flex:1">
            <h4 style="color:var(--accent);font-size:1.1rem;margin-bottom:16px">
              <i class="fas fa-gift"></i>
              Ưu đãi độc quyền
            </h4>
            <div style="display:grid;gap:12px">
              <div class="hover-lift" style="background:rgba(14,165,164,0.08);padding:12px;border-radius:12px">
                <div style="font-weight:600">Premium Care</div>
                <div class="muted">Bảo hành cao cấp 24 tháng + Đổi mới 30 ngày</div>
              </div>
              <div class="hover-lift" style="background:rgba(14,165,164,0.08);padding:12px;border-radius:12px">
                <div style="font-weight:600">Trả góp ưu đãi</div>
                <div class="muted">Lãi suất 0% qua nhiều ngân hàng + Xét duyệt nhanh</div>
              </div>
              <div class="hover-lift" style="background:rgba(14,165,164,0.08);padding:12px;border-radius:12px">
                <div style="font-weight:600">Trade-in cao cấp</div>
                <div class="muted">Thu cũ đổi mới - Trợ giá lên đến 3 triệu đồng</div>
              </div>
            </div>
          </div>
          <div style="width:300px;display:flex;flex-direction:column;gap:16px;align-items:flex-end">
            <div style="text-align:right">
              <div style="font-size:1.1rem;font-weight:600;color:var(--accent)">Hỗ trợ 24/7</div>
              <div style="font-weight:800;font-size:1.2rem">0357 957 957</div>
              <div class="muted">Tư vấn miễn phí</div>
            </div>
            <button class="btn hover-lift" id="cta-sale" style="width:100%">
              <i class="fas fa-percent"></i>
              Khám phá ưu đãi
            </button>
            <div style="display:flex;gap:12px;margin-top:8px">
              <a href="https://facebook.com" target="_blank" class="hover-lift" style="color:var(--accent)">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="https://zalo.me" target="_blank" class="hover-lift" style="color:var(--accent)">
                <i class="fas fa-comment"></i>
              </a>
              <a href="mailto:contact@htmobile.com" class="hover-lift" style="color:var(--accent)">
                <i class="fas fa-envelope"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <aside class="cart" id="side-cart">
        <h3>Giỏ hàng</h3>
        <div id="cart-items">
          <div class="muted">Giỏ hàng trống — thêm sản phẩm để bắt đầu.</div>
        </div>
        <div class="total-row" style="margin-top:18px">
          <div>Tổng:</div>
          <div id="cart-total">0₫</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button class="btn hover-lift" id="checkout">
            <i class="fas fa-credit-card"></i>
            Thanh toán
          </button>
          <button class="btn hover-lift" id="clear-cart" style="background:#e6eef2;color:var(--primary)">
            <i class="fas fa-trash-alt"></i>
            Xóa
          </button>
        </div>
      </aside>
    </section>

    <section class="grid">
      <aside class="filters">
        <h3>Bộ lọc</h3>
        <div class="filter-group">
          <label>Thương hiệu</label>
          <div class="checkbox"><input type="checkbox" class="brand" value="Apple" id="b-apple"><label for="b-apple">Apple</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Samsung" id="b-samsung"><label for="b-samsung">Samsung</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Xiaomi" id="b-xiaomi"><label for="b-xiaomi">Xiaomi</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="OPPO" id="b-oppo"><label for="b-oppo">OPPO</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Asus" id="b-asus"><label for="b-asus">ASUS</label></div>
        </div>
        <div class="filter-group">
          <label>Mức giá</label>
          <select id="price-range">
            <option value="any">Tất cả</option>
            <option value="0-4990000">Dưới 5.000.000₫</option>
            <option value="4990000-9990000">5.000.000 - 9.990.000₫</option>
            <option value="9990000-19990000">10.000.000 - 19.990.000₫</option>
            <option value="19990000">Trên 20.000.000₫</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Sắp xếp</label>
          <select id="sort-by">
            <option value="popular">Phổ biến</option>
            <option value="price-asc">Giá tăng dần</option>
            <option value="price-desc">Giá giảm dần</option>
            <option value="newest">Hàng mới</option>
          </select>
        </div>
        <div style="margin-top:12px">
          <button class="btn hover-lift" id="apply-filters">
            <i class="fas fa-filter"></i>
            Áp dụng
          </button>
          <button class="btn hover-lift" id="reset-filters" style="background:#e6eef2;color:var(--primary)">
            <i class="fas fa-undo"></i>
            Đặt lại
          </button>
        </div>

        <hr style="margin:14px 0;border:0;border-top:1px solid #f1f5f9" />
        <h4>Thông tin cửa hàng</h4>
        <p class="muted">Địa chỉ: 274 Nguyễn Chí Thanh, Phường Trà Vinh,Vĩnh Long</p>
        <p class="muted">Bảo hành: 12 tháng chính hãng (tùy model)</p>
      </aside>

      <div>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h2 id="products">Sản phẩm</h2>
          <div class="muted">Hiển thị <span id="product-count">0</span> sản phẩm</div>
        </div>

        <div class="product-list" id="product-list">
          <!-- sản phẩm sẽ được render bằng JS -->
        </div>

        <!-- pagination (mô phỏng) -->
        <div style="display:flex;justify-content:center;margin-top:22px;gap:8px">
          <button class="btn" id="prev-page" style="background:#eef2f7;color:var(--primary)">Trước</button>
          <div class="badge">Trang <span id="page-num">1</span></div>
          <button class="btn" id="next-page" style="background:#eef2f7;color:var(--primary)">Sau</button>
        </div>
      </div>
    </section>

    <!-- about -->
    <section id="about" style="margin-top:40px">
      <div style="display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start">
        <div class="hero-card">
          <h3>Về HT MobileStore</h3>
          <p class="muted"> HT Mobile Store là cửa hàng điện thoại mẫu. Mục tiêu là trải nghiệm mua sắm online: tìm kiếm, lọc, so sánh, xem chi tiết sản phẩm và thanh toán.</p>

          <h4 style="margin-top:12px">Chính sách bán hàng (mô phỏng)</h4>
          <ul class="muted">
            <li>Hoàn tiền trong 7 ngày nếu lỗi do nhà sản xuất.</li>
            <li>Hỗ trợ trả góp qua đối tác tài chính 0% lãi suất.</li>
            <li>Giao hàng trong 1-3 ngày tùy khu vực.</li>
          </ul>
        </div>

        <div class="hero-card">
          <h4>Thông tin liên hệ</h4>
          <p class="muted">Email: vohtuan5599@mobilestore.com</p>
          <p class="muted">Hotline: 0357 957 957</p>
          <div style="margin-top:12px"><button class="btn" id="contact-btn">Gửi tin nhắn</button></div>
        </div>
      </div>
    </section>

    <!-- contact / footer -->
    <section id="contact" style="margin-top:30px">
      <div class="hero-card">
        <h3>Liên hệ</h3>
        <form id="contact-form" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <input placeholder="Họ và tên" required />
          <input placeholder="Số điện thoại" required />
          <input placeholder="Email" />
          <input placeholder="Chủ đề" />
          <textarea placeholder="Nội dung" style="grid-column:1/ -1;min-height:120px"></textarea>
          <div style="grid-column:1/ -1;display:flex;gap:8px;justify-content:flex-end">
            <button class="btn" type="submit">Gửi</button>
            <button class="btn" id="reset-contact" style="background:#e6eef2;color:var(--primary)" type="button">Đặt lại</button>
          </div>
        </form>
      </div>
    </section>

    <footer>
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div>
          <div style="font-weight:700">MobileZone</div>
          <div class="muted">© 2025 Hoàng Tuấn Mobile Store .</div>
        </div>
        <div class="muted">Thanh toán: Visa, Mastercard, VNPay, MOMO , Shopee Pay</div>
      </div>
    </footer>
  </main>

  <!-- product detail modal template -->
  <template id="modal-tpl">
    <div class="modal" id="product-modal">
      <div class="card">
        <div>
          <img id="m-img" src="" alt="" style="width:100%;height:360px;object-fit:contain;border-radius:8px;background:#fff;padding:8px" />
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap" id="m-gallery"></div>
        </div>
        <div>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <h3 id="m-title"></h3>
            <div style="display:flex;gap:8px"><button class="btn" id="m-add">Thêm vào giỏ</button><button class="btn" id="m-close" style="background:#e6eef2;color:var(--primary)">Đóng</button></div>
          </div>
          <div class="muted" id="m-sub"></div>
          <div style="margin-top:12px" class="specs" id="m-specs"></div>
        </div>
      </div>
    </div>
  </template>

  <!-- Toast Notifications -->
  <div class="toast" id="toast">
    <div class="toast-card">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M8 12.5L10.5 15L16 9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="#059669" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span id="toast-message"></span>
    </div>
  </div>

  <!-- Mobile Checkout -->
  <div class="mobile-checkout" id="mobile-checkout">
    <div class="promo">
      <input type="text" placeholder="Mã khuyến mãi">
      <button class="btn" onclick="applyPromo()">Áp dụng</button>
    </div>
    <button class="btn" onclick="checkout()">Thanh toán</button>
  </div>

  <script>
    // User Data
    let userData = {
      name: "Hoàng Tuấn",
      age: 25,
      address: "274 Nguyễn Chí Thanh, Phường Trà Vinh, Vĩnh Long",
      rank: "gold", // bronze, silver, gold, platinum, diamond
      wishlist: new Set(),
      purchaseHistory: []
    };

    // Toggle User Menu
    function toggleUserMenu() {
      document.getElementById('user-dropdown').classList.toggle('active');
    }

    // Wishlist Management
    function toggleWishlist(productId) {
      const btn = event.currentTarget;
      event.stopPropagation(); // Ngăn sự kiện click lan ra ngoài
      
      if (userData.wishlist.has(productId)) {
        userData.wishlist.delete(productId);
        btn.classList.remove('active');
        showToast('Đã xóa khỏi danh sách yêu thích');
      } else {
        userData.wishlist.add(productId);
        btn.classList.add('active');
        // Thêm hiệu ứng confetti nhỏ khi yêu thích
        confetti({
          particleCount: 30,
          spread: 40,
          origin: { x: btn.getBoundingClientRect().left / window.innerWidth, y: btn.getBoundingClientRect().top / window.innerHeight },
          colors: ['#ef4444', '#ff8787', '#ffa8a8'],
          disableForReducedMotion: true
        });
        showToast('Đã thêm vào danh sách yêu thích');
      }
      
      // Cập nhật số lượng yêu thích với animation
      const countEl = document.getElementById('wishlist-count');
      countEl.textContent = userData.wishlist.size;
      countEl.parentElement.classList.add('highlight');
      setTimeout(() => countEl.parentElement.classList.remove('highlight'), 600);
      
      // Lưu vào localStorage
      localStorage.setItem('userWishlist', JSON.stringify(Array.from(userData.wishlist)));
    }

    // Loading Screen & Initial Notification
    window.addEventListener('load', () => {
      setTimeout(() => {
        document.getElementById('loading-screen').classList.add('fade-out');
        
        // Show author notification
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          bottom: 20px;
          left: 20px;
          background: rgba(0,0,0,0.8);
          color: white;
          padding: 15px 20px;
          border-radius: 10px;
          font-size: 0.95rem;
          z-index: 9999;
          max-width: 350px;
          box-shadow: 0 4px 15px rgba(0,0,0,0.2);
          animation: slideIn 0.5s ease-out;
          backdrop-filter: blur(10px);
        `;
        notification.innerHTML = `
          <div style="margin-bottom: 8px"><strong>Web được thực hiện bởi dev Hoàng Tuấn</strong></div>
          <div style="color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-bottom: 5px">© 2025 All rights reserved</div>
          <div style="color: #4CAF50; font-size: 0.9rem">Donate: VCB - 1026152912</div>
        `;
        document.body.appendChild(notification);

        // Show welcome notification
        const welcomeNotif = document.createElement('div');
        welcomeNotif.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%);
          color: white;
          padding: 15px 20px;
          border-radius: 10px;
          font-size: 0.95rem;
          z-index: 9999;
          max-width: 350px;
          box-shadow: 0 4px 15px rgba(0,0,0,0.2);
          animation: slideInRight 0.5s ease-out;
          backdrop-filter: blur(10px);
          border: 1px solid rgba(255,255,255,0.1);
        `;
        welcomeNotif.innerHTML = `
          <div style="display: flex; align-items: center; gap: 12px;">
            <i class="fas fa-store" style="font-size: 1.5rem; color: #4CAF50;"></i>
            <div>
              <div style="font-weight: 700; margin-bottom: 5px; font-size: 1.1rem;">Chào mừng đến với HT Mobile! 👋</div>
              <div style="color: rgba(255,255,255,0.9); font-size: 0.9rem">
                Khám phá ngay bộ sưu tập smartphone cao cấp với ưu đãi đặc biệt
              </div>
            </div>
          </div>
        `;
        document.body.appendChild(welcomeNotif);

        // Remove notifications after 5 seconds
        setTimeout(() => {
          notification.style.animation = 'slideOut 0.5s ease-in forwards';
          welcomeNotif.style.animation = 'slideOutRight 0.5s ease-in forwards';
          setTimeout(() => {
            notification.remove();
            welcomeNotif.remove();
          }, 500);
        }, 5000);
      }, 1500);

      // Initialize wishlist buttons
      userData.wishlist.forEach(id => {
        const btn = document.querySelector(`.wishlist-btn[onclick="toggleWishlist(${id})"]`);
        if (btn) btn.classList.add('active');
      });
    });

    // MOCK DATA: danh sách điện thoại (mang tính minh họa)
    const PRODUCTS = [
  {id:1,brand:'Apple',model:'iPhone 11',price:5990000,old:8900000,stock:20,desc:'Chip A13 Bionic, màn 6.1" LCD',img:'https://didongmango.com/images/products/2022/05/08/large/iphone-11-xanhla-600x600_1652028626.jpg',tags:['Phổ biến']},
  {id:2,brand:'Apple',model:'iPhone 12 Pro Max',price:15490000,old:18990000,stock:15,desc:'Chip A14, 6.7" OLED, 5G',img:'https://phucanhcdn.com/media/product/40798_iphone_12_pro_max_pacific_blue.jpg',tags:['Bán chạy']},
  {id:3,brand:'Apple',model:'iPhone 13',price:11090000,old:15990000,stock:20,desc:'Chip A15, 6.1" OLED',img:'https://cdn.tgdd.vn/Products/Images/42/223602/iphone-13-midnight-2-600x600.jpg',tags:['Hot']},
  {id:4,brand:'Apple',model:'iPhone 13 Pro Max',price:16000000,old:21990000,stock:15,desc:'Chip A15, 120Hz, pin tốt',img:'https://cdn.tgdd.vn/Products/Images/42/250261/iphone-13-pro-max-silver-600x600.jpg',tags:['Trả góp']},
  {id:5,brand:'Apple',model:'iPhone 14 Pro',price:21990000,old:23990000,stock:12,desc:'Chip A16, 6.1", Dynamic Island',img:'https://halomobile.vn/wp-content/uploads/2022/07/iphone-14-pro-tim-min.png',tags:['Hot']},
  {id:6,brand:'Apple',model:'iPhone 15 Pro Max',price:27990000,old:30990000,stock:15,desc:'Chip A17 Pro, Titanium',img:'https://chungblackberry.com/wp-content/uploads/2024/04/15-prm-tn.png',tags:['Flagship']},
  {id:7,brand:'Apple',model:'iPhone 17 Pro',price:38990000,old:40990000,stock:10,desc:'Chip A19 Pro, OLED 120Hz',img:'https://www.didongmy.com/vnt_upload/product/09_2025/thumbs/(600x600)_iphone_17_pro_max_orange_thumb_didongmy.jpg',tags:['Siêu phẩm']},

  {id:8,brand:'Samsung',model:'Galaxy S23',price:18990000,old:20990000,stock:30,desc:'Snapdragon 8 Gen2, 6.1" AMOLED',img:'https://product.hstatic.net/1000370129/product/s23__tim_e7ac8994443f4240b27bfc62a2caac5e_master.jpg',tags:['Bán chạy']},
  {id:9,brand:'Samsung',model:'Galaxy S24 Ultra',price:31990000,old:34990000,stock:22,desc:'Snapdragon 8 Gen3, bút S-Pen',img:'https://cdn.tgdd.vn/Products/Images/42/307174/samsung-galaxy-s24-ultra-5g-600x600.jpg',tags:['Flagship']},
  {id:10,brand:'Samsung',model:'Galaxy A55',price:10990000,old:11990000,stock:40,desc:'Exynos 1480, AMOLED 120Hz',img:'https://cdn.tgdd.vn/Products/Images/42/303585/samsung-galaxy-a54-5g-tim-thumb-1-600x600.jpg',tags:['Tầm trung']},

  {id:11,brand:'Xiaomi',model:'Redmi Note 12',price:4990000,old:5990000,stock:20,desc:'Màn 6.7", pin 5000mAh',img:'https://product.hstatic.net/1000370129/product/xiaomi_redmi_note_12_turbo_white-digiphone_06efc0a8c8f949e2ad736194241c9f1f_grande.jpg',tags:['Giá rẻ']},
  {id:12,brand:'Xiaomi',model:'13T Pro',price:15990000,old:17990000,stock:26,desc:'Dimensity 9200+, camera Leica',img:'https://cdn.tgdd.vn/Products/Images/42/309816/xiaomi-13t-pro-xanh-thumb-600x600.jpg',tags:['Camera đẹp']},

  {id:13,brand:'OPPO',model:'Reno10 5G',price:9990000,old:11490000,stock:45,desc:'Camera tele 32MP, sạc nhanh 67W',img:'https://cdn.tgdd.vn/Products/Images/42/309722/oppo-reno10-blue-thumbnew-600x600.jpg',tags:['Tầm trung']},
  {id:14,brand:'OPPO',model:'Find N3 Flip',price:22990000,old:24990000,stock:15,desc:'Điện thoại gập, camera Hasselblad',img:'https://cdn.tgdd.vn/Products/Images/42/309835/oppo-n3-flip-den-thumbai-600x600.jpg',tags:['Cao cấp']},

  {id:15,brand:'Apple',model:'iPhone Xs Max',price:5990000,old:9990000,stock:55,desc:'Màn OLED 6.5, chip A12, camera kép 12MP',img:'https://cdn.tgdd.vn/Products/Images/42/190321/iphone-xs-max-gold-600x600.jpg',tags:['Đẹp']},
  {id:16,brand:'Vivo',model:'Y17s',price:4290000,old:4990000,stock:90,desc:'Helio G85, pin 5000mAh',img:'https://cdn.tgdd.vn/Products/Images/42/314975/vivo-y17s-thumb-600x600.jpg',tags:['Giá rẻ']},

  {id:17,brand:'Realme',model:'11 Pro+',price:8990000,old:9990000,stock:60,desc:'Camera 200MP, sạc nhanh 100W',img:'https://cdn.tgdd.vn/Products/Images/42/309821/realme-11-pro-plus-5g-thumb-600x600.jpeg',tags:['Hot']},
  {id:18,brand:'Realme',model:'C67',price:4790000,old:5390000,stock:80,desc:'Helio G85, camera 108MP',img:'https://cdn.tgdd.vn/Products/Images/42/319658/realme-c67-xanh-thumb-600x600.jpg',tags:['Giá rẻ']},

  {id:19,brand:'Huawei',model:'P60 Pro',price:22990000,old:24990000,stock:12,desc:'Snapdragon 8+ Gen1, camera XMAGE',img:'https://cdn2.cellphones.com.vn/x/media/catalog/product/_/t/_ter3434_3_.jpg',tags:['Flagship']},
  {id:20,brand:'Google',model:'Pixel 8 Pro',price:21990000,old:23990000,stock:15,desc:'Tensor G3, màn 120Hz',img:'https://sonpixel.vn/wp-content/uploads/2023/08/Google-Pixel-8-Pro-SonPixel.jpg',tags:['Flagship']},

  {id:21,brand:'Asus',model:'ROG Phone 7',price:22990000,old:24990000,stock:10,desc:'Snapdragon 8 Gen2, dành cho game thủ',img:'https://cdn.tgdd.vn/Products/Images/42/302945/asus-rog-phone-7-600x600.jpg',tags:['Gaming']},
  {id:22,brand:'Asus',model:'Zenfone 10',price:15990000,old:17990000,stock:10,desc:'Snapdragon 8 Gen2, nhỏ gọn 5.9"',img:'https://cdn.tgdd.vn/Products/Images/42/304435/asus-zenfone-10-600x600.jpg',tags:['Nhỏ gọn']},
  {id:23,brand:'Sony',model:'Xperia 1 V',price:31990000,old:34990000,stock:5,desc:'Snapdragon 8 Gen2, màn 4K OLED',img:'https://product.hstatic.net/1000370129/product/xperia-1-v-mark-5-trang_0bd74a402a6646f2a72d0c7519a13846_master_2423e0bf5fac4163a99e0316976dc10c.png',tags:['Camera tốt']},
  {id:24,brand:'Nokia',model:'G60 5G',price:6990000,old:7990000,stock:40,desc:'Snapdragon 695, pin 4500mAh',img:'https://cdn2.cellphones.com.vn/x/media/catalog/product/2/2/221ws.jpg',tags:['Bền bỉ']}


];


    // state
    let state = {
      products: PRODUCTS.slice(),
      page:1,
      perPage:8,
      cart:{},
      filters:{brands:[],price:'any',sort:'popular',q:''}
    };

    // util - format VND
    function formatVND(n){
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + '₫';
    }

    // render products
    function renderProducts(){
      let list = document.getElementById('product-list');
      list.innerHTML = '';
      // apply filters
      let filtered = state.products.filter(p => {
        const brands = state.filters.brands;
        if(brands.length && !brands.includes(p.brand)) return false;
        if(state.filters.price!=='any'){
          const pr = state.filters.price;
          if(pr.includes('-')){
            const [min,max] = pr.split('-').map(Number);
            if(p.price < min || p.price > max) return false;
          } else {
            const min = Number(pr);
            if(p.price < min) return false;
          }
        }
        if(state.filters.q){
          const q = state.filters.q.toLowerCase();
          if(!(p.model.toLowerCase().includes(q) || p.brand.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q))) return false;
        }
        return true;
      });

      // sort
      if(state.filters.sort === 'price-asc') filtered.sort((a,b)=>a.price-b.price);
      if(state.filters.sort === 'price-desc') filtered.sort((a,b)=>b.price-a.price);
      if(state.filters.sort === 'newest') filtered.sort((a,b)=>b.id-a.id);

      // pagination
      const total = filtered.length;
      const start = (state.page-1)*state.perPage;
      const pageItems = filtered.slice(start,start+state.perPage);

      document.getElementById('product-count').textContent = total;
      document.getElementById('page-num').textContent = state.page;

      pageItems.forEach(p => {
        const node = document.createElement('div'); node.className='product';
        const rating = p.rating || 4.5;
        const ratingCount = p.ratingCount || Math.floor(Math.random() * 50) + 10;
        node.innerHTML = `
          <button class="wishlist-btn" onclick="toggleWishlist(${p.id})">
            <i class="fas fa-heart"></i>
          </button>
          <img src="${p.img}" alt="${p.model}" />
          <div class="title">${p.brand} ${p.model}</div>
          <div class="desc">${p.desc}</div>
          <div class="rating">
            ${Array.from({length: 5}, (_, i) => `
              <i class="fas fa-star ${i < Math.floor(rating) ? 'star' : 'star empty'}"></i>
            `).join('')}
            <span class="muted">(${ratingCount})</span>
          </div>
          <div class="tags">${p.tags.map(t=>`<div class="tag">${t}</div>`).join('')}</div>
          <div class="price-row">
            <div>
              <div class="price">${formatVND(p.price)}</div>
              ${p.old ? `<div class="old">${formatVND(p.old)}</div>` : ''}
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn btn-add hover-lift" data-id="${p.id}">
                <i class="fas fa-cart-plus"></i>
                Thêm vào giỏ hàng
              </button>
              <button class="btn hover-lift" style="background:#eef2f7;color:var(--primary)" data-id="${p.id}" data-action="view">
                <i class="fas fa-eye"></i>
                Xem chi tiết
              </button>
            </div>
          </div>
        `;
        list.appendChild(node);
      });

      // update product list count
      document.getElementById('product-list').dispatchEvent(new CustomEvent('updated'));
    }

    // cart management
    function toggleCart() {
      document.getElementById('cart-modal').classList.toggle('active');
    }

    function addToCart(id,qty=1){
      const p = state.products.find(x=>x.id==id);
      if(!p) return alert('Sản phẩm không tồn tại');
      if(!state.cart[id]) state.cart[id] = {...p, qty:0};
      state.cart[id].qty += qty;
      if(state.cart[id].qty > p.stock) state.cart[id].qty = p.stock;
      renderCart();
      showToast('Đã thêm sản phẩm vào giỏ hàng!');
      toggleCart();
    }
    function removeFromCart(id){ delete state.cart[id]; renderCart(); }
    function changeQty(id,delta){ if(!state.cart[id]) return; state.cart[id].qty += delta; if(state.cart[id].qty<=0) removeFromCart(id); else if(state.cart[id].qty>state.cart[id].stock) state.cart[id].qty = state.cart[id].stock; renderCart(); }
    function clearCart(){ state.cart = {}; renderCart(); }

    function renderCart(){
      const wrap = document.getElementById('cart-items');
      wrap.innerHTML = '';
      const ids = Object.keys(state.cart);
      if(ids.length===0){ wrap.innerHTML = '<div class="muted">Giỏ hàng trống — thêm sản phẩm để bắt đầu.</div>'; }
      let total = 0;
      ids.forEach(id => {
        const it = state.cart[id];
        total += it.price * it.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${it.img}" alt="${it.model}" />
          <div style="flex:1">
            <div style="font-weight:700">${it.brand} ${it.model}</div>
            <div class="muted">${formatVND(it.price)} x ${it.qty}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <div class="qty">
              <button data-action="dec" data-id="${it.id}">-</button>
              <div style="padding:6px 10px;border-radius:8px;border:1px solid #eef2f7">${it.qty}</div>
              <button data-action="inc" data-id="${it.id}">+</button>
            </div>
            <button data-action="remove" data-id="${it.id}" style="background:transparent;border:0;color:var(--muted);cursor:pointer">Xóa</button>
          </div>
        `;
        wrap.appendChild(div);
      });
      document.getElementById('cart-total').textContent = formatVND(total);
      document.getElementById('cart-count').textContent = ids.length;
    }

    // product modal
    function openProduct(id){
      const p = state.products.find(x=>x.id==id);
      if(!p) return;
      const tpl = document.getElementById('modal-tpl');
      const clone = tpl.content.cloneNode(true);
      clone.querySelector('#m-img').src = p.img;
      clone.querySelector('#m-title').textContent = `${p.brand} ${p.model}`;
      clone.querySelector('#m-sub').textContent = p.desc + ' — Còn ' + p.stock + ' sản phẩm';
      clone.querySelector('#m-specs').innerHTML = `
        <ul>
          <li>Giá: ${formatVND(p.price)}</li>
          ${p.old?'<li>Giá cũ: '+formatVND(p.old)+'</li>':''}
          <li>Kho: ${p.stock}</li>
          <li>Mô tả: ${p.desc}</li>
        </ul>
      `;
      const modal = clone.querySelector('.modal');
      document.body.appendChild(modal);
      modal.querySelector('#m-close').addEventListener('click', ()=>modal.remove());
      modal.querySelector('#m-add').addEventListener('click', ()=>{ addToCart(p.id); modal.remove(); });
    }

    // wire events
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t.matches('.btn-add')) addToCart(t.dataset.id);
      if(t.dataset.action==='view') openProduct(t.dataset.id);
      if(t.id==='open-cart'){
        // scroll to cart
        document.getElementById('side-cart').scrollIntoView({behavior:'smooth'});
      }
      if(t.dataset.action==='remove') removeFromCart(t.dataset.id);
      if(t.dataset.action==='inc') changeQty(t.dataset.id,1);
      if(t.dataset.action==='dec') changeQty(t.dataset.id,-1);
      if(t.id==='clear-cart') clearCart();
      if(t.id==='checkout'){
        // mock checkout
        if(Object.keys(state.cart).length===0) {
          showToast('Giỏ hàng đang trống!');
          return;
        }
        const total = Object.values(state.cart).reduce((s,it)=>s+it.price*it.qty,0);
        const ok = confirm('Tổng thanh toán: ' + formatVND(total) + '\nTiến hành mô phỏng thanh toán?');
        if(ok){ 
          showToast('🎉 Cảm ơn bạn đã đặt hàng!');
          confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
          });
          clearCart();
          updateMobileCheckout();
        }
      }
    });

    // search & filters
    document.getElementById('search-btn').addEventListener('click', ()=>{ state.filters.q = document.getElementById('search').value.trim(); state.page=1; renderProducts(); });
    document.getElementById('apply-filters').addEventListener('click', ()=>{
      const brands = Array.from(document.querySelectorAll('.brand:checked')).map(el=>el.value);
      state.filters.brands = brands;
      state.filters.price = document.getElementById('price-range').value;
      state.filters.sort = document.getElementById('sort-by').value;
      state.page = 1;
      renderProducts();
    });
    document.getElementById('reset-filters').addEventListener('click', ()=>{
      document.querySelectorAll('.brand').forEach(b=>b.checked=false);
      document.getElementById('price-range').value='any';
      document.getElementById('sort-by').value='popular';
      state.filters = {brands:[],price:'any',sort:'popular',q:''};
      document.getElementById('search').value='';
      state.page=1; renderProducts();
    });

    document.getElementById('prev-page').addEventListener('click', ()=>{ if(state.page>1){ state.page--; renderProducts(); } });
    document.getElementById('next-page').addEventListener('click', ()=>{ state.page++; renderProducts(); });

    // product list updated event
    document.getElementById('product-list').addEventListener('updated', ()=>{
      // ensure page not out of range
      const total = document.getElementById('product-count').textContent*1;
      const maxPage = Math.max(1, Math.ceil(total/state.perPage));
      if(state.page>maxPage) state.page = maxPage;
      document.getElementById('page-num').textContent = state.page;
    });

    // Thông báo Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      const toastMessage = document.getElementById('toast-message');
      toastMessage.textContent = message;
      toast.querySelector('.toast-card').style.transform = 'translateY(0)';
      toast.querySelector('.toast-card').style.opacity = '1';
      
      setTimeout(() => {
        toast.querySelector('.toast-card').style.transform = 'translateY(-10px)';
        toast.querySelector('.toast-card').style.opacity = '0';
      }, 3000);
    }

    // Cart Animation
    function animateCartButton() {
      const cartBtn = document.getElementById('open-cart');
      cartBtn.classList.add('cart-bump');
      setTimeout(() => cartBtn.classList.remove('cart-bump'), 400);
    }

    // Mobile Checkout
    function updateMobileCheckout() {
      const mobileCheckout = document.getElementById('mobile-checkout');
      if (window.innerWidth <= 980) {
        mobileCheckout.style.display = Object.keys(state.cart).length > 0 ? 'flex' : 'none';
      } else {
        mobileCheckout.style.display = 'none';
      }
    }

    // Promo Code
    function applyPromo() {
      showToast('Mã khuyến mãi đã được áp dụng!');
    }

    // Hook up new effects
    const oldAddToCart = addToCart;
    addToCart = function(id, qty=1) {
      oldAddToCart(id, qty);
      showToast('Đã thêm sản phẩm vào giỏ hàng!');
      animateCartButton();
      updateMobileCheckout();
    }

    window.addEventListener('resize', updateMobileCheckout);
    updateMobileCheckout();

    // Xử lý menu mobile
    const menuToggle = document.getElementById('menu-toggle');
    const header = document.querySelector('header');
    const navLinks = document.querySelectorAll('.nav-link');

    menuToggle.addEventListener('click', () => {
      header.classList.toggle('mobile-menu-active');
    });

    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        header.classList.remove('mobile-menu-active');
        const targetId = link.getAttribute('href');
        if (targetId !== '#') {
          const targetSection = document.querySelector(targetId);
          if (targetSection) {
            targetSection.scrollIntoView({ behavior: 'smooth' });
          }
        }
      });
    });

    // Xử lý form liên hệ
    document.getElementById('contact-form')?.addEventListener('submit', (e) => {
      e.preventDefault();
      showToast('Cảm ơn bạn đã gửi liên hệ! Chúng tôi sẽ phản hồi sớm nhất.');
      e.target.reset();
    });

    // contact form
    document.getElementById('contact-form').addEventListener('submit', (e)=>{
      e.preventDefault(); alert('Cảm ơn! Tin nhắn của bạn đã được gửi (mô phỏng).'); e.target.reset();
    });

    // initial render
    renderProducts();
    renderCart();

    // small UX: keyboard Enter to search
    document.getElementById('search').addEventListener('keydown', (e)=>{ if(e.key==='Enter') document.getElementById('search-btn').click(); });

    // sample: prefill filters from URL (mô phỏng)
    (function readQuery(){
      const params = new URLSearchParams(location.search);
      if(params.get('q')){ document.getElementById('search').value = params.get('q'); state.filters.q = params.get('q'); }
    })();
  </script>
</body>
</html>

