<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cửa hàng điện thoại HT Mobile </title>
  <meta name="description" content="Cửa hàng điện thoại Hoàng Tuấn. Danh sách sản phẩm, giỏ hàng, tìm kiếm, lọc và thanh toán." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#0f172a; /* dark navy */
      --accent:#0ea5a4; /* teal */
      --muted:#64748b;
      --bg:#f8fafc;
      --card:#ffffff;
      --glass: rgba(255,255,255,0.6);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#eef2f7);color:var(--primary);}
    header{background:linear-gradient(90deg,#e6f6f5, #f1fbff);border-bottom:1px solid rgba(15,23,42,0.05);}
    .container{max-width:1200px;margin:0 auto;padding:20px;}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#34d399);display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
    .site-title{font-size:1.25rem;font-weight:700}
    nav ul{display:flex;gap:14px;list-style:none;padding:0;margin:0}
    nav a{color:var(--primary);text-decoration:none;padding:8px 10px;border-radius:8px}
    nav a:hover{background:rgba(14,165,164,0.08)}

    /* hero */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:24px;align-items:center;padding:28px 0}
    .hero-card{background:var(--card);border-radius:14px;padding:24px;box-shadow:0 8px 30px rgba(2,6,23,0.06)}
    .hero h1{margin:0;font-size:1.75rem}
    .hero p{color:var(--muted);margin-top:8px}
    .searchbar{display:flex;gap:8px;margin-top:16px}
    .searchbar input{flex:1;padding:12px 14px;border-radius:10px;border:1px solid #e6eef2;font-size:0.95rem}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer}

    /* filters + products */
    .grid{display:grid;grid-template-columns:260px 1fr;gap:20px;margin-top:20px}
    .filters{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.04)}
    .filters h3{margin:0 0 12px 0}
    .filter-group{margin-bottom:12px}
    .filter-group label{display:block;font-size:0.9rem;color:var(--muted);margin-bottom:8px}
    .checkbox{display:flex;align-items:center;gap:8px;margin:6px 0}

    .product-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .product{background:linear-gradient(180deg,var(--card),#fff);border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(2,6,23,0.03);display:flex;flex-direction:column}
    .product img{width:100%;height:170px;object-fit:contain;background:linear-gradient(180deg,#fafafa,#fff);border-radius:8px}
    .product .title{font-weight:700;margin-top:10px}
    .product .desc{font-size:0.9rem;color:var(--muted);margin-top:6px}
    .price-row{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .price{font-weight:800;color:var(--primary)}
    .old{font-size:0.85rem;color:var(--muted);text-decoration:line-through}
    .tags{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .tag{background:rgba(14,165,164,0.1);padding:6px 8px;border-radius:8px;font-size:0.8rem;color:var(--accent)}

    /* cart */
    .cart{background:linear-gradient(180deg,#fff,#fcfffe);border-radius:12px;padding:16px;box-shadow:0 8px 30px rgba(2,6,23,0.06);position:sticky;top:24px}
    .cart h3{margin:0 0 12px 0}
    .cart-item{display:flex;gap:10px;align-items:center;padding:10px 0;border-top:1px dashed #eef2f7}
    .cart-item:first-of-type{border-top:0}
    .cart-item img{width:52px;height:52px;object-fit:contain;border-radius:8px}
    .qty{display:flex;align-items:center;gap:6px}
    .qty button{width:28px;height:28px;border-radius:8px;border:1px solid #e6eef2;background:transparent;cursor:pointer}
    .total-row{display:flex;justify-content:space-between;font-weight:800;margin-top:12px}

    /* product modal */
    .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,23,0.45);padding:24px;z-index:60;}
    .modal .card{width:920px;max-width:95%;background:var(--card);border-radius:12px;padding:18px;display:grid;grid-template-columns:420px 1fr;gap:16px}
    .specs{font-size:0.92rem;color:var(--muted)}

    /* footer */
    footer{margin-top:36px;padding:28px 0;color:var(--muted)}

    /* responsive */
    @media(max-width:980px){
      .hero{grid-template-columns:1fr}
      .grid{grid-template-columns:1fr}
      .cart{position:static}
      .modal .card{grid-template-columns:1fr}
      .product img{height:160px}
    }

    /* small utilities */
    .muted{color:var(--muted)}
    .center{text-align:center}
    .badge{background:#fff;padding:6px 8px;border-radius:12px;border:1px solid #eef2f7}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo">MZ</div>
        <div>
          <div class="site-title">Hoàng Tuấn Mobile Store</div>
          <div class="muted">Cửa hàng điện thoại &amp; Phụ kiện</div>
        </div>
      </div>
      <nav>
        <ul>
          <li><a href="#">Trang chủ</a></li>
          <li><a href="#products">Sản phẩm</a></li>
          <li><a href="#about">Giới thiệu</a></li>
          <li><a href="#contact">Liên hệ</a></li>
        </ul>
      </nav>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="badge muted">Mở cửa 9:00 - 21:00</div>
        <button class="btn" id="open-cart">Giỏ hàng (<span id="cart-count">0</span>)</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="hero-card">
        <h1>Chọn điện thoại phù hợp — giá tốt, bảo hành chính hãng</h1> </p>

        <div class="searchbar">
          <input id="search" placeholder="Tìm kiếm: thương hiệu, model, giá..." />
          <button class="btn" id="search-btn">Tìm kiếm</button>
        </div>

        <div style="display:flex;gap:12px;margin-top:18px">
          <div style="flex:1">
            <h4 class="muted">Ưu đãi hôm nay</h4>
            <ul class="muted" style="margin:8px 0 0 16px">
              <li>Giảm đến 30% cho học sinh, sinh viên</li>
              <li>Trả góp 0% lãi suất (qua đối tác)</li>
              <li>Đổi máy cũ lấy mới - thêm giá trị đến 2.000.000₫</li>
            </ul>
          </div>
          <div style="width:260px;display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <div class="muted">Gọi đặt hàng:</div>
            <div style="font-weight:800">0357 957 957</div>
            <button class="btn" id="cta-sale">Xem khuyến mãi</button>
          </div>
        </div>
      </div>

      <aside class="cart" id="side-cart">
        <h3>Giỏ hàng</h3>
        <div id="cart-items">
          <div class="muted">Giỏ hàng trống — thêm sản phẩm để bắt đầu.</div>
        </div>
        <div class="total-row" style="margin-top:18px">
          <div>Tổng:</div>
          <div id="cart-total">0₫</div>
        </div>
        <div style="display:flex;gap:8px;margin-top:12px">
          <button class="btn" id="checkout">Thanh toán</button>
          <button class="btn" id="clear-cart" style="background:#e6eef2;color:var(--primary)">Xóa</button>
        </div>
      </aside>
    </section>

    <section class="grid">
      <aside class="filters">
        <h3>Bộ lọc</h3>
        <div class="filter-group">
          <label>Thương hiệu</label>
          <div class="checkbox"><input type="checkbox" class="brand" value="Apple" id="b-apple"><label for="b-apple">Apple</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Samsung" id="b-samsung"><label for="b-samsung">Samsung</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="Xiaomi" id="b-xiaomi"><label for="b-xiaomi">Xiaomi</label></div>
          <div class="checkbox"><input type="checkbox" class="brand" value="OPPO" id="b-oppo"><label for="b-oppo">OPPO</label></div>
        </div>
        <div class="filter-group">
          <label>Mức giá</label>
          <select id="price-range">
            <option value="any">Tất cả</option>
            <option value="0-4990000">Dưới 5.000.000₫</option>
            <option value="4990000-9990000">5.000.000 - 9.990.000₫</option>
            <option value="9990000-19990000">10.000.000 - 19.990.000₫</option>
            <option value="19990000">Trên 20.000.000₫</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Sắp xếp</label>
          <select id="sort-by">
            <option value="popular">Phổ biến</option>
            <option value="price-asc">Giá tăng dần</option>
            <option value="price-desc">Giá giảm dần</option>
            <option value="newest">Hàng mới</option>
          </select>
        </div>
        <div style="margin-top:12px">
          <button class="btn" id="apply-filters">Áp dụng</button>
          <button class="btn" id="reset-filters" style="background:#e6eef2;color:var(--primary)">Đặt lại</button>
        </div>

        <hr style="margin:14px 0;border:0;border-top:1px solid #f1f5f9" />
        <h4>Thông tin cửa hàng</h4>
        <p class="muted">Địa chỉ: 274 Nguyễn Chí Thanh, Phường Trà Vinh,Vĩnh Long</p>
        <p class="muted">Bảo hành: 12 tháng chính hãng (tùy model)</p>
      </aside>

      <div>
        <div style="display:flex;align-items:center;justify-content:space-between">
          <h2 id="products">Sản phẩm</h2>
          <div class="muted">Hiển thị <span id="product-count">0</span> sản phẩm</div>
        </div>

        <div class="product-list" id="product-list">
          <!-- sản phẩm sẽ được render bằng JS -->
        </div>

        <!-- pagination (mô phỏng) -->
        <div style="display:flex;justify-content:center;margin-top:22px;gap:8px">
          <button class="btn" id="prev-page" style="background:#eef2f7;color:var(--primary)">Trước</button>
          <div class="badge">Trang <span id="page-num">1</span></div>
          <button class="btn" id="next-page" style="background:#eef2f7;color:var(--primary)">Sau</button>
        </div>
      </div>
    </section>

    <!-- about -->
    <section id="about" style="margin-top:40px">
      <div style="display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start">
        <div class="hero-card">
          <h3>Về HT MobileStore</h3>
          <p class="muted"> HT Mobile Store là cửa hàng điện thoại mẫu. Mục tiêu là trải nghiệm mua sắm online: tìm kiếm, lọc, so sánh, xem chi tiết sản phẩm và thanh toán.</p>

          <h4 style="margin-top:12px">Chính sách bán hàng (mô phỏng)</h4>
          <ul class="muted">
            <li>Hoàn tiền trong 7 ngày nếu lỗi do nhà sản xuất.</li>
            <li>Hỗ trợ trả góp qua đối tác tài chính 0% lãi suất.</li>
            <li>Giao hàng trong 1-3 ngày tùy khu vực.</li>
          </ul>
        </div>

        <div class="hero-card">
          <h4>Thông tin liên hệ</h4>
          <p class="muted">Email: vohtuan5599@mobilestore.com</p>
          <p class="muted">Hotline: 0357 957 957</p>
          <div style="margin-top:12px"><button class="btn" id="contact-btn">Gửi tin nhắn</button></div>
        </div>
      </div>
    </section>

    <!-- contact / footer -->
    <section id="contact" style="margin-top:30px">
      <div class="hero-card">
        <h3>Liên hệ</h3>
        <form id="contact-form" style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
          <input placeholder="Họ và tên" required />
          <input placeholder="Số điện thoại" required />
          <input placeholder="Email" />
          <input placeholder="Chủ đề" />
          <textarea placeholder="Nội dung" style="grid-column:1/ -1;min-height:120px"></textarea>
          <div style="grid-column:1/ -1;display:flex;gap:8px;justify-content:flex-end">
            <button class="btn" type="submit">Gửi</button>
            <button class="btn" id="reset-contact" style="background:#e6eef2;color:var(--primary)" type="button">Đặt lại</button>
          </div>
        </form>
      </div>
    </section>

    <footer>
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
        <div>
          <div style="font-weight:700">MobileZone</div>
          <div class="muted">© 2025 Hoàng Tuấn Mobile Store .</div>
        </div>
        <div class="muted">Thanh toán: Visa, Mastercard, VNPay, MOMO , Shopee Pay</div>
      </div>
    </footer>
  </main>

  <!-- product detail modal template -->
  <template id="modal-tpl">
    <div class="modal" id="product-modal">
      <div class="card">
        <div>
          <img id="m-img" src="" alt="" style="width:100%;height:360px;object-fit:contain;border-radius:8px;background:#fff;padding:8px" />
          <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap" id="m-gallery"></div>
        </div>
        <div>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <h3 id="m-title"></h3>
            <div style="display:flex;gap:8px"><button class="btn" id="m-add">Thêm vào giỏ</button><button class="btn" id="m-close" style="background:#e6eef2;color:var(--primary)">Đóng</button></div>
          </div>
          <div class="muted" id="m-sub"></div>
          <div style="margin-top:12px" class="specs" id="m-specs"></div>
        </div>
      </div>
    </div>
  </template>

  <script>
    // MOCK DATA: danh sách điện thoại (mang tính minh họa)
    const PRODUCTS = [
      {id:1,brand:'Apple',model:'iPhone 14 Pro',price:21990000,old:23990000,stock:12,desc:'Chip A16, màn hình 6.1", camera 48MP',img:'https://halomobile.vn/wp-content/uploads/2022/07/iphone-14-pro-tim-min.png',tags:['Hot','Trả góp']},
      {id:2,brand:'Samsung',model:'Galaxy S23',price:18990000,old:20990000,stock:8,desc:'Snapdragon 8 Gen2, màn 6.1" AMOLED',img:'https://product.hstatic.net/1000370129/product/s23__tim_e7ac8994443f4240b27bfc62a2caac5e_master.jpg',tags:['Bestseller']},
      {id:3,brand:'Xiaomi',model:'Redmi Note 12',price:4990000,old:5990000,stock:20,desc:'Màn 6.7", Pin 5000mAh',img:'https://product.hstatic.net/1000370129/product/xiaomi_redmi_note_12_turbo_white-digiphone_06efc0a8c8f949e2ad736194241c9f1f_grande.jpg',tags:['Giá rẻ']},
      {id:4,brand:'OPPO',model:'Reno8 Pro',price:7490000,old:8490000,stock:15,desc:'Thiết kế mỏng nhẹ, camera AI',img:'https://www.duchuymobile.com/images/detailed/53/mau-xanh_whjg-ib.jpg',tags:['Khuyến mãi']},
      {id:5,brand:'Apple',model:'iPhone 12 Pro Max',price:14990000,old:19900000,stock:6,desc:'Apple A14 Bionic Ram 6GB Sạc 20W ',img:'https://tuanapple.store/wp-content/uploads/2021/07/iphone-12-pro-max-128gb-cu-2.jpg',tags:['Hot','Trả góp']},
      {id:6,brand:'Samsung',model:'Galaxy A54',price:6990000,old:7990000,stock:18,desc:'Màn 6.4, Chip Exynos 1380 8 nhân',img:'https://cdn.tgdd.vn/Products/Images/42/250103/samsung-galaxy-a54-thumb-den-600x600.jpg',tags:[]},
      {id:7,brand:'Xiaomi',model:'12T Pro',price:12990000,old:14990000,stock:9,desc:'Camera 200MP, hiệu năng cao',img:'https://cdn.tgdd.vn/Products/Images/42/279066/xiaomi-12t-pro-thumb-bac-1-600x600.jpg',tags:['Hot']},
      {id:8,brand:'Apple',model:'iPhone 11',price:5990000,old:8900000,stock:30,desc:'Chip: Apple A13 Bionic, Ram 4GB ',img:'https://didongmango.com/images/products/2022/05/08/large/iphone-11-xanhla-600x600_1652028626.jpg',tags:['Giá rẻ']}
    ];

    // state
    let state = {
      products: PRODUCTS.slice(),
      page:1,
      perPage:8,
      cart:{},
      filters:{brands:[],price:'any',sort:'popular',q:''}
    };

    // util - format VND
    function formatVND(n){
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + '₫';
    }

    // render products
    function renderProducts(){
      let list = document.getElementById('product-list');
      list.innerHTML = '';
      // apply filters
      let filtered = state.products.filter(p => {
        const brands = state.filters.brands;
        if(brands.length && !brands.includes(p.brand)) return false;
        if(state.filters.price!=='any'){
          const pr = state.filters.price;
          if(pr.includes('-')){
            const [min,max] = pr.split('-').map(Number);
            if(p.price < min || p.price > max) return false;
          } else {
            const min = Number(pr);
            if(p.price < min) return false;
          }
        }
        if(state.filters.q){
          const q = state.filters.q.toLowerCase();
          if(!(p.model.toLowerCase().includes(q) || p.brand.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q))) return false;
        }
        return true;
      });

      // sort
      if(state.filters.sort === 'price-asc') filtered.sort((a,b)=>a.price-b.price);
      if(state.filters.sort === 'price-desc') filtered.sort((a,b)=>b.price-a.price);
      if(state.filters.sort === 'newest') filtered.sort((a,b)=>b.id-a.id);

      // pagination
      const total = filtered.length;
      const start = (state.page-1)*state.perPage;
      const pageItems = filtered.slice(start,start+state.perPage);

      document.getElementById('product-count').textContent = total;
      document.getElementById('page-num').textContent = state.page;

      pageItems.forEach(p => {
        const node = document.createElement('div'); node.className='product';
        node.innerHTML = `
          <img src="${p.img}" alt="${p.model}" />
          <div class="title">${p.brand} ${p.model}</div>
          <div class="desc">${p.desc}</div>
          <div class="tags">${p.tags.map(t=>`<div class="tag">${t}</div>`).join('')}</div>
          <div class="price-row">
            <div>
              <div class="price">${formatVND(p.price)}</div>
              ${p.old ? `<div class="old">${formatVND(p.old)}</div>` : ''}
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn btn-add" data-id="${p.id}">Thêm</button>
              <button class="btn" style="background:#eef2f7;color:var(--primary)" data-id="${p.id}" data-action="view">Xem</button>
            </div>
          </div>
        `;
        list.appendChild(node);
      });

      // update product list count
      document.getElementById('product-list').dispatchEvent(new CustomEvent('updated'));
    }

    // cart management
    function addToCart(id,qty=1){
      const p = state.products.find(x=>x.id==id);
      if(!p) return alert('Sản phẩm không tồn tại');
      if(!state.cart[id]) state.cart[id] = {...p, qty:0};
      state.cart[id].qty += qty;
      if(state.cart[id].qty > p.stock) state.cart[id].qty = p.stock;
      renderCart();
    }
    function removeFromCart(id){ delete state.cart[id]; renderCart(); }
    function changeQty(id,delta){ if(!state.cart[id]) return; state.cart[id].qty += delta; if(state.cart[id].qty<=0) removeFromCart(id); else if(state.cart[id].qty>state.cart[id].stock) state.cart[id].qty = state.cart[id].stock; renderCart(); }
    function clearCart(){ state.cart = {}; renderCart(); }

    function renderCart(){
      const wrap = document.getElementById('cart-items');
      wrap.innerHTML = '';
      const ids = Object.keys(state.cart);
      if(ids.length===0){ wrap.innerHTML = '<div class="muted">Giỏ hàng trống — thêm sản phẩm để bắt đầu.</div>'; }
      let total = 0;
      ids.forEach(id => {
        const it = state.cart[id];
        total += it.price * it.qty;
        const div = document.createElement('div'); div.className='cart-item';
        div.innerHTML = `
          <img src="${it.img}" alt="${it.model}" />
          <div style="flex:1">
            <div style="font-weight:700">${it.brand} ${it.model}</div>
            <div class="muted">${formatVND(it.price)} x ${it.qty}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;align-items:flex-end">
            <div class="qty">
              <button data-action="dec" data-id="${it.id}">-</button>
              <div style="padding:6px 10px;border-radius:8px;border:1px solid #eef2f7">${it.qty}</div>
              <button data-action="inc" data-id="${it.id}">+</button>
            </div>
            <button data-action="remove" data-id="${it.id}" style="background:transparent;border:0;color:var(--muted);cursor:pointer">Xóa</button>
          </div>
        `;
        wrap.appendChild(div);
      });
      document.getElementById('cart-total').textContent = formatVND(total);
      document.getElementById('cart-count').textContent = ids.length;
    }

    // product modal
    function openProduct(id){
      const p = state.products.find(x=>x.id==id);
      if(!p) return;
      const tpl = document.getElementById('modal-tpl');
      const clone = tpl.content.cloneNode(true);
      clone.querySelector('#m-img').src = p.img;
      clone.querySelector('#m-title').textContent = `${p.brand} ${p.model}`;
      clone.querySelector('#m-sub').textContent = p.desc + ' — Còn ' + p.stock + ' sản phẩm';
      clone.querySelector('#m-specs').innerHTML = `
        <ul>
          <li>Giá: ${formatVND(p.price)}</li>
          ${p.old?'<li>Giá cũ: '+formatVND(p.old)+'</li>':''}
          <li>Kho: ${p.stock}</li>
          <li>Mô tả: ${p.desc}</li>
        </ul>
      `;
      const modal = clone.querySelector('.modal');
      document.body.appendChild(modal);
      modal.querySelector('#m-close').addEventListener('click', ()=>modal.remove());
      modal.querySelector('#m-add').addEventListener('click', ()=>{ addToCart(p.id); modal.remove(); });
    }

    // wire events
    document.addEventListener('click', (e)=>{
      const t = e.target;
      if(t.matches('.btn-add')) addToCart(t.dataset.id);
      if(t.dataset.action==='view') openProduct(t.dataset.id);
      if(t.id==='open-cart'){
        // scroll to cart
        document.getElementById('side-cart').scrollIntoView({behavior:'smooth'});
      }
      if(t.dataset.action==='remove') removeFromCart(t.dataset.id);
      if(t.dataset.action==='inc') changeQty(t.dataset.id,1);
      if(t.dataset.action==='dec') changeQty(t.dataset.id,-1);
      if(t.id==='clear-cart') clearCart();
      if(t.id==='checkout'){
        // mock checkout
        if(Object.keys(state.cart).length===0) return alert('Giỏ hàng trống');
        const total = Object.values(state.cart).reduce((s,it)=>s+it.price*it.qty,0);
        const ok = confirm('Tổng thanh toán: ' + formatVND(total) + '\nTiến hành mô phỏng thanh toán?');
        if(ok){ alert('Cảm ơn bạn đã đặt hàng! (Mô phỏng)'); clearCart(); }
      }
    });

    // search & filters
    document.getElementById('search-btn').addEventListener('click', ()=>{ state.filters.q = document.getElementById('search').value.trim(); state.page=1; renderProducts(); });
    document.getElementById('apply-filters').addEventListener('click', ()=>{
      const brands = Array.from(document.querySelectorAll('.brand:checked')).map(el=>el.value);
      state.filters.brands = brands;
      state.filters.price = document.getElementById('price-range').value;
      state.filters.sort = document.getElementById('sort-by').value;
      state.page = 1;
      renderProducts();
    });
    document.getElementById('reset-filters').addEventListener('click', ()=>{
      document.querySelectorAll('.brand').forEach(b=>b.checked=false);
      document.getElementById('price-range').value='any';
      document.getElementById('sort-by').value='popular';
      state.filters = {brands:[],price:'any',sort:'popular',q:''};
      document.getElementById('search').value='';
      state.page=1; renderProducts();
    });

    document.getElementById('prev-page').addEventListener('click', ()=>{ if(state.page>1){ state.page--; renderProducts(); } });
    document.getElementById('next-page').addEventListener('click', ()=>{ state.page++; renderProducts(); });

    // product list updated event
    document.getElementById('product-list').addEventListener('updated', ()=>{
      // ensure page not out of range
      const total = document.getElementById('product-count').textContent*1;
      const maxPage = Math.max(1, Math.ceil(total/state.perPage));
      if(state.page>maxPage) state.page = maxPage;
      document.getElementById('page-num').textContent = state.page;
    });

    // contact form
    document.getElementById('contact-form').addEventListener('submit', (e)=>{
      e.preventDefault(); alert('Cảm ơn! Tin nhắn của bạn đã được gửi (mô phỏng).'); e.target.reset();
    });

    // initial render
    renderProducts();
    renderCart();

    // small UX: keyboard Enter to search
    document.getElementById('search').addEventListener('keydown', (e)=>{ if(e.key==='Enter') document.getElementById('search-btn').click(); });

    // sample: prefill filters from URL (mô phỏng)
    (function readQuery(){
      const params = new URLSearchParams(location.search);
      if(params.get('q')){ document.getElementById('search').value = params.get('q'); state.filters.q = params.get('q'); }
    })();
  </script>
</body>
</html>
